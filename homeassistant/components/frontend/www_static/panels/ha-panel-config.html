<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="ha-config-section"><template><style include="iron-flex ha-style">.content{padding:28px 20px 0;max-width:1040px;margin:0 auto;}.header{@apply (--paper-font-display1);opacity:var(--dark-primary-opacity);}.together{margin-top:32px;}.intro{@apply (--paper-font-subhead);width:100%;max-width:400px;margin-right:40px;opacity:var(--dark-primary-opacity);}.panel{margin-top:-24px;}.panel ::slotted(*){margin-top:24px;display:block;}.narrow.content{max-width:640px;}.narrow .together{margin-top:20px;}.narrow .header{@apply (--paper-font-headline);}.narrow .intro{font-size:14px;padding-bottom:20px;margin-right:0;max-width:500px;}</style><div class$="[[computeContentClasses(isWide)]]"><div class="header"><slot name="header"></slot></div><div class$="[[computeClasses(isWide)]]"><div class="intro"><slot name="introduction"></slot></div><div class="flex panel"><slot></slot></div></div></div></template></dom-module><script>Polymer({is:"ha-config-section",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},isWide:{type:Boolean,value:!1}},computeContentClasses:function(e){return e?"content ":"content narrow"},computeClasses:function(e){return"together layout "+(e?"horizontal":"vertical narrow")}});</script><dom-module id="ha-config-navigation" assetpath="dashboard/"><template><style include="iron-flex ha-style">paper-item{cursor:pointer;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Configure Home Assistant</span> <span slot="introduction">Here it is possible to configure your components and Home Assistant. Not everything is possible to configure from the UI yet, but we're working on it.</span><paper-card><template is="dom-repeat" items="[[pages]]"><template is="dom-if" if="[[_computeLoaded(hass, item)]]"><paper-item on-tap="_navigate"><paper-item-body two-line="">[[_computeCaption(item)]]<div secondary="">[[_computeDescription(item)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></template></paper-card></ha-config-section></template></dom-module><script>Polymer({is:"ha-config-navigation",properties:{hass:{type:Object},isWide:{type:Boolean,value:!1},pages:{type:Array,value:[{domain:"core",caption:"General",description:"Validate your configuration file and control the server.",loaded:!0},{domain:"automation",caption:"Automation",description:"Create and edit automations."},{domain:"script",caption:"Script",description:"Create and edit scripts."},{domain:"zwave",caption:"Z-Wave",description:"Manage your Z-Wave network."}]}},_computeLoaded:function(i,o){return o.loaded||window.hassUtil.isComponentLoaded(i,o.domain)},_computeCaption:function(i){return i.caption},_computeDescription:function(i){return i.description},_navigate:function(i){history.pushState(null,null,"/config/"+i.model.item.domain),this.fire("location-changed")}});</script><dom-module id="ha-config-dashboard" assetpath="dashboard/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}.border{margin:32px auto 0;border-bottom:1px solid rgba(0, 0, 0, 0.12);max-width:1040px;}.narrow .border{max-width:640px;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">Configuration</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-navigation is-wide="[[isWide]]" hass="[[hass]]"></ha-config-navigation></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-config-dashboard",properties:{hass:Object,isWide:Boolean},computeClasses:function(e){return e?"content":"content narrow"},computeIsThemesLoaded:function(e){return e.themes&&e.themes.themes&&Object.keys(e.themes.themes).length}});</script><dom-module id="ha-config-section-core" assetpath="core/"><template><style include="iron-flex ha-style">.validate-container{@apply (--layout-vertical);@apply (--layout-center-center);height:140px;}.validate-result{color:var(--google-green-500);font-weight:500;margin-bottom:1em;}.config-invalid{margin:1em 0;}.config-invalid .text{color:var(--google-red-500);font-weight:500;}.config-invalid paper-button{float:right;}.validate-log{white-space:pre-wrap;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Server Management</span> <span slot="introduction">Changing your configuration can be a tiresome process. We know. This section will try to make your life a little bit easier.</span><paper-card heading="Configuration Validation"><div class="card-content">Validate your configuration if you recently made some changes to your configuration and want to make sure that it is all valid.<template is="dom-if" if="[[!validateLog]]"><div class="validate-container"><template is="dom-if" if="[[!validating]]"><div class="validate-result" id="result">[[validateResult]]</div><paper-button raised="" on-tap="validateConfig">check config</paper-button></template><template is="dom-if" if="[[validating]]"><paper-spinner active=""></paper-spinner></template></div></template><template is="dom-if" if="[[validateLog]]"><div class="config-invalid"><span class="text">Configuration invalid.</span><paper-button raised="" on-tap="validateConfig">check config</paper-button></div><div id="configLog" class="validate-log">[[validateLog]]</div></template></div></paper-card><paper-card heading="Configuration Reloading"><div class="card-content">Some parts of Home Assistant can reload without requiring a restart. Hitting reload will unload their current configuration and load the new one.</div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="homeassistant" service="reload_core_config">Reload Core</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="group" service="reload" hidden$="[[!groupLoaded(hass)]]">Reload Groups</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="automation" service="reload" hidden$="[[!automationLoaded(hass)]]">Reload Automation</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="script" service="reload" hidden$="[[!scriptLoaded(hass)]]">Reload Scripts</ha-call-service-button></div></paper-card><paper-card heading="Server Management"><div class="card-content">Control your Home Assistant serverâ€¦ from Home Assistant.</div><div class="card-actions warning"><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="restart">Restart</ha-call-service-button><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="stop">Stop</ha-call-service-button></div></paper-card></ha-config-section></template></dom-module><script>Polymer({is:"ha-config-section-core",properties:{hass:{type:Object},isWide:{type:Boolean,value:!1},validating:{type:Boolean,value:!1},validateResult:{type:String,value:""},validateLog:{type:String,value:""}},groupLoaded:function(i){return window.hassUtil.isComponentLoaded(i,"group")},automationLoaded:function(i){return window.hassUtil.isComponentLoaded(i,"automation")},scriptLoaded:function(i){return window.hassUtil.isComponentLoaded(i,"script")},validateConfig:function(){this.validating=!0,this.validateLog="",this.validateResult="";var i=this;this.hass.callApi("POST","config/core/check_config").then(function(t){i.validating=!1,(i.configValid="valid"===t.result)?i.validateResult="Valid!":i.validateLog=t.errors})}});</script><dom-module id="ha-config-section-hassbian" assetpath="core/"><template><style include="iron-flex ha-style">.header{font-size:16px;margin-bottom:1em;}.header .status{font-size:14px;float:right;}.card-actions paper-button{color:var(--default-primary-color);font-weight:500;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Bring Hassbian to the next level</span> <span slot="introduction">Discover exciting add-ons to enhance your Home Assistant installation. Add an MQTT server or control a connected TV via HDMI-CEC.</span><template is="dom-if" if="[[suiteStatus]]"><template is="dom-repeat" items="[[computeSuiteKeys(suiteStatus)]]" as="suiteKey"><paper-card><div class="card-content"><div class="header">[[computeTitle(suiteKey)]] <span class="status">[[computeSuiteStatus(suiteStatus, suiteKey)]]</span></div>[[computeSuiteDescription(suiteStatus, suiteKey)]]</div><div class="card-actions"><paper-button on-tap="suiteMoreInfoTapped">LEARN MORE</paper-button><template is="dom-if" if="[[computeShowInstall(suiteStatus, suiteKey)]]"><paper-button on-tap="suiteActionTapped">INSTALL</paper-button></template></div></paper-card></template></template></ha-config-section></template></dom-module><script>Polymer({is:"ha-config-section-hassbian",properties:{hass:{type:Object},isWide:{type:Boolean},suiteStatus:{type:Object,value:null}},updateStatus:function(){this.hass.callApi("GET","config/hassbian/suites").then(function(t){this.suiteStatus=t;for(var e=!1,s=Object.keys(t),i=0;i<s.length;i++)if("installing"===t[s[i]].state){e=!0;break}e&&this.async(this.updateStatus,5e3)}.bind(this))},attached:function(){this.updateStatus=this.updateStatus.bind(this),this.updateStatus()},computeSuiteKeys:function(t){return Object.keys(t).sort(function(e,s){var i="installing"===t[e].state,n="installing"===t[s].state;if(i&&n);else{if(i)return-1;if(n)return 1}return e<s?-1:e>s?1:0})},computeSuiteDescription:function(t,e){return t[e].description},computeTitle:function(t){return t.substr(0,1).toUpperCase()+t.substr(1)},computeSuiteStatus:function(t,e){var s=t[e].state.replace(/_/," ");return s.substr(0,1).toUpperCase()+s.substr(1)},computeShowStatus:function(t,e){var s=t[e].state;return"installing"!==s&&"not_installed"!==s},computeShowInstall:function(t,e){return"not_installed"===t[e].state},suiteMoreInfoTapped:function(){},suiteActionTapped:function(){this.hass.callApi("POST","config/hassbian/suites/openzwave/install").then(this.updateStatus)}});</script><dom-module id="ha-config-section-themes" assetpath="core/"><template><ha-config-section is-wide="[[isWide]]"><span slot="header">Set a theme</span> <span slot="introduction">Choose 'default' to use whatever theme the backend chooses or pick a theme for this device.</span><paper-card><div class="card-content"><paper-dropdown-menu label="Theme" vertical-align="bottom"><paper-listbox slot="dropdown-content" selected="{{selectedTheme}}"><template is="dom-repeat" items="[[themes]]" as="theme"><paper-item>[[theme]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></paper-card></ha-config-section></template></dom-module><script>Polymer({is:"ha-config-section-themes",properties:{hass:{type:Object},isWide:{type:Boolean},themes:{type:Array,computed:"computeThemes(hass)"},selectedTheme:{type:Number}},ready:function(){this.hass.selectedTheme&&this.themes.indexOf(this.hass.selectedTheme)>0?this.selectedTheme=this.themes.indexOf(this.hass.selectedTheme):this.hass.selectedTheme||(this.selectedTheme=0)},observers:["selectionChanged(hass, selectedTheme)"],computeThemes:function(e){return e?["Backend-selected","default"].concat(Object.keys(e.themes.themes).sort()):[]},selectionChanged:function(e,s){s>0&&s<this.themes.length?e.selectedTheme!==this.themes[s]&&this.fire("settheme",this.themes[s]):0===s&&""!==e.selectedTheme&&this.fire("settheme","")}});</script><dom-module id="ha-config-core" assetpath="core/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}.border{margin:32px auto 0;border-bottom:1px solid rgba(0, 0, 0, 0.12);max-width:1040px;}.narrow .border{max-width:640px;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Core</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-section-core is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-core><template is="dom-if" if="[[computeIsThemesLoaded(hass)]]"><div class="border"></div><ha-config-section-themes is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-themes></template><template is="dom-if" if="[[computeIsHassbianLoaded(hass)]]"><div class="border"></div><ha-config-section-hassbian is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-hassbian></template></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-config-core",properties:{hass:Object,isWide:Boolean},computeClasses:function(e){return e?"content":"content narrow"},computeIsHassbianLoaded:function(e){return window.hassUtil.isComponentLoaded(e,"config.hassbian")},computeIsZwaveLoaded:function(e){return window.hassUtil.isComponentLoaded(e,"config.zwave")},computeIsThemesLoaded:function(e){return e.themes&&e.themes.themes&&Object.keys(e.themes.themes).length},_backTapped:function(){history.back()}});</script><dom-module id="paper-fab" assetpath="../../bower_components/paper-fab/"><template strip-whitespace=""><style include="paper-material-styles">:host{@apply --layout-vertical;@apply --layout-center-center;background:var(--paper-fab-background, var(--accent-color));border-radius:50%;box-sizing:border-box;color:var(--text-primary-color);cursor:pointer;height:56px;min-width:0;outline:none;padding:16px;position:relative;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;width:56px;z-index:0;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;@apply --paper-fab;}[hidden]{display:none !important;}:host([mini]){width:40px;height:40px;padding:8px;@apply --paper-fab-mini;}:host([disabled]){color:var(--paper-fab-disabled-text, var(--paper-grey-500));background:var(--paper-fab-disabled-background, var(--paper-grey-300));@apply --paper-fab-disabled;}iron-icon{@apply --paper-fab-iron-icon;}span{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;@apply --paper-fab-label;}:host(.keyboard-focus){background:var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><iron-icon id="icon" hidden$="{{!_computeIsIconFab(icon, src)}}" src="[[src]]" icon="[[icon]]"></iron-icon><span hidden$="{{_computeIsIconFab(icon, src)}}">{{label}}</span></template><script>Polymer({is:"paper-fab",behaviors:[Polymer.PaperButtonBehavior],properties:{src:{type:String,value:""},icon:{type:String,value:""},mini:{type:Boolean,value:!1,reflectToAttribute:!0},label:{type:String,observer:"_labelChanged"}},_labelChanged:function(){this.setAttribute("aria-label",this.label)},_computeIsIconFab:function(e,t){return e.length>0||t.length>0}});</script></dom-module><dom-module id="ha-automation-picker" assetpath="automation/"><template><style include="ha-style">:host{display:block;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Automations</div></app-toolbar></app-header><ha-config-section is-wide="[[isWide]]"><div slot="header">Automation editor</div><div slot="introduction">The automation editor allows you to create and edit automations. Please read <a href="https://home-assistant.io/docs/automation/editor/" target="_blank">the instructions</a> to make sure that you have configured Home Assistant correctly.</div><paper-card heading="Pick automation to edit"><template is="dom-if" if="[[!automations.length]]"><div class="card-content"><p>We couldn't find any editable automations.</p></div></template><template is="dom-repeat" items="[[automations]]" as="automation"><paper-item><paper-item-body two-line="" on-tap="automationTapped"><div>[[computeName(automation)]]</div><div secondary="">[[computeDescription(automation)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></paper-card></ha-config-section><paper-fab is-wide$="[[isWide]]" icon="mdi:plus" title="Add Automation" on-tap="addAutomation"></paper-fab></app-header-layout></template></dom-module><script>Polymer({is:"ha-automation-picker",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},automations:{type:Array},isWide:{type:Boolean}},automationTapped:function(t){history.pushState(null,null,"/config/automation/edit/"+this.automations[t.model.index].attributes.id),this.fire("location-changed")},addAutomation:function(){history.pushState(null,null,"/config/automation/new"),this.fire("location-changed")},computeName:function(t){return window.hassUtil.computeStateName(t)},computeDescription:function(t){return""},_backTapped:function(){history.back()}});</script><dom-module id="paper-radio-button" assetpath="../../bower_components/paper-radio-button/"><template strip-whitespace=""><style>:host{display:inline-block;line-height:0;white-space:nowrap;cursor:pointer;@apply --paper-font-common-base;--calculated-paper-radio-button-size:var(--paper-radio-button-size, 16px);--calculated-paper-radio-button-ink-size:var(--paper-radio-button-ink-size, -1px);}:host(:focus){outline:none;}#radioContainer{@apply --layout-inline;@apply --layout-center-center;position:relative;width:var(--calculated-paper-radio-button-size);height:var(--calculated-paper-radio-button-size);vertical-align:middle;@apply --paper-radio-button-radio-container;}#ink{position:absolute;top:50%;left:50%;right:auto;width:var(--calculated-paper-radio-button-ink-size);height:var(--calculated-paper-radio-button-ink-size);color:var(--paper-radio-button-unchecked-ink-color, var(--primary-text-color));opacity:0.6;pointer-events:none;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);}#ink[checked]{color:var(--paper-radio-button-checked-ink-color, var(--primary-color));}#offRadio, #onRadio{position:absolute;box-sizing:border-box;top:0;left:0;width:100%;height:100%;border-radius:50%;}#offRadio{border:2px solid var(--paper-radio-button-unchecked-color, var(--primary-text-color));background-color:var(--paper-radio-button-unchecked-background-color, transparent);transition:border-color 0.28s;}#onRadio{background-color:var(--paper-radio-button-checked-color, var(--primary-color));-webkit-transform:scale(0);transform:scale(0);transition:-webkit-transform ease 0.28s;transition:transform ease 0.28s;will-change:transform;}:host([checked]) #offRadio{border-color:var(--paper-radio-button-checked-color, var(--primary-color));}:host([checked]) #onRadio{-webkit-transform:scale(0.5);transform:scale(0.5);}#radioLabel{line-height:normal;position:relative;display:inline-block;vertical-align:middle;margin-left:var(--paper-radio-button-label-spacing, 10px);white-space:normal;color:var(--paper-radio-button-label-color, var(--primary-text-color));@apply --paper-radio-button-label;}:host([checked]) #radioLabel{@apply --paper-radio-button-label-checked;}:host-context([dir="rtl"]) #radioLabel{margin-left:0;margin-right:var(--paper-radio-button-label-spacing, 10px);}#radioLabel[hidden]{display:none;}:host([disabled]) #offRadio{border-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled][checked]) #onRadio{background-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled]) #radioLabel{opacity:0.65;}</style><div id="radioContainer"><div id="offRadio"></div><div id="onRadio"></div></div><div id="radioLabel"><slot></slot></div></template><script>Polymer({is:"paper-radio-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"radio","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},ready:function(){this._rippleContainer=this.$.radioContainer},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-radio-button-ink-size").trim()){var e=parseFloat(this.getComputedStyleValue("--calculated-paper-radio-button-size").trim()),t=Math.floor(3*e);t%2!=e%2&&t++,this.updateStyles({"--paper-radio-button-ink-size":t+"px"})}})}});</script></dom-module><dom-module id="paper-radio-group" assetpath="../../bower_components/paper-radio-group/"><template><style>:host{display:inline-block;}:host ::slotted(*){padding:var(--paper-radio-group-item-padding, 12px);}</style><slot></slot></template></dom-module><script>Polymer({is:"paper-radio-group",behaviors:[Polymer.IronMenubarBehavior],hostAttributes:{role:"radiogroup",tabindex:0},properties:{attrForSelected:{type:String,value:"name"},selectedAttribute:{type:String,value:"checked"},selectable:{type:String,value:"paper-radio-button"},allowEmptySelection:{type:Boolean,value:!1}},select:function(e){var t=this._valueToItem(e);if(!t||!t.hasAttribute("disabled")){if(this.selected){var i=this._valueToItem(this.selected);if(this.selected==e){if(!this.allowEmptySelection)return void(i&&(i.checked=!0));e=""}i&&(i.checked=!1)}Polymer.IronSelectableBehavior.select.apply(this,[e]),this.fire("paper-radio-group-changed")}},_activateFocusedItem:function(){this._itemActivate(this._valueForItem(this.focusedItem),this.focusedItem)},_onUpKey:function(e){this._focusPrevious(),e.preventDefault(),this._activateFocusedItem()},_onDownKey:function(e){this._focusNext(),e.preventDefault(),this._activateFocusedItem()},_onLeftKey:function(e){Polymer.IronMenubarBehaviorImpl._onLeftKey.apply(this,arguments),this._activateFocusedItem()},_onRightKey:function(e){Polymer.IronMenubarBehaviorImpl._onRightKey.apply(this,arguments),this._activateFocusedItem()}});</script><script>var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(){}function n(n,t){var o=E,i=void 0,a=void 0,r=void 0,l=void 0;for(l=arguments.length;l-- >2;)A.push(arguments[l]);for(t&&null!=t.children&&(A.length||A.push(t.children),delete t.children);A.length;)if((a=A.pop())&&void 0!==a.pop)for(l=a.length;l--;)A.push(a[l]);else!0!==a&&!1!==a||(a=null),(r="function"!=typeof n)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(r=!1)),r&&i?o[o.length-1]+=a:o===E?o=[a]:o.push(a),i=r;var u=new e;return u.nodeName=n,u.children=o,u.attributes=null==t?void 0:t,u.key=null==t?void 0:t.key,void 0!==D.vnode&&D.vnode(u),u}function t(e,n){for(var t in n)e[t]=n[t];return e}function o(e){!e._dirty&&(e._dirty=!0)&&1==M.push(e)&&(D.debounceRendering||setTimeout)(i)}function i(){var e=void 0,n=M;for(M=[];e=n.pop();)e._dirty&&w(e)}function a(e,n,t){return"string"==typeof n||"number"==typeof n?void 0!==e.splitText:"string"==typeof n.nodeName?!e._componentConstructor&&r(e,n.nodeName):t||e._componentConstructor===n.nodeName}function r(e,n){return e.normalizedNodeName===n||e.nodeName.toLowerCase()===n.toLowerCase()}function l(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var i in o)void 0===n[i]&&(n[i]=o[i]);return n}function u(e,n){var t=n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t.normalizedNodeName=e,t}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function s(e,n,t,o,i){if("className"===n&&(n="class"),"key"===n);else if("ref"===n)t&&t(null),o&&o(e);else if("class"!==n||i)if("style"===n){if(o&&"string"!=typeof o&&"string"!=typeof t||(e.style.cssText=o||""),o&&"object"===(void 0===o?"undefined":W(o))){if("string"!=typeof t)for(var a in t)a in o||(e.style[a]="");for(var r in o)e.style[r]="number"==typeof o[r]&&!1===V.test(r)?o[r]+"px":o[r]}}else if("dangerouslySetInnerHTML"===n)o&&(e.innerHTML=o.__html||"");else if("o"==n[0]&&"n"==n[1]){var l=n!==(n=n.replace(/Capture$/,""));n=n.toLowerCase().substring(2),o?t||e.addEventListener(n,c,l):e.removeEventListener(n,c,l),(e._listeners||(e._listeners={}))[n]=o}else if("list"!==n&&"type"!==n&&!i&&n in e)d(e,n,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(n);else{var u=i&&n!==(n=n.replace(/^xlink\:?/,""));null==o||!1===o?u?e.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):e.removeAttribute(n):"function"!=typeof o&&(u?e.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),o):e.setAttribute(n,o))}else e.className=o||""}function d(e,n,t){try{e[n]=t}catch(e){}}function c(e){return this._listeners[e.type](D.event&&D.event(e)||e)}function h(){for(var e=void 0;e=Z.pop();)D.afterMount&&D.afterMount(e),e.componentDidMount&&e.componentDidMount()}function f(e,n,t,o,i,a){$++||(q=null!=i&&void 0!==i.ownerSVGElement,Q=null!=e&&!(B in e));var r=g(e,n,t,o,a);return i&&r.parentNode!==i&&i.appendChild(r),--$||(Q=!1,a||h()),r}function g(e,n,t,o,i){var a=e,l=q;if(null==n&&(n=""),"string"==typeof n)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=n&&(e.nodeValue=n):(a=document.createTextNode(n),e&&(e.parentNode&&e.parentNode.replaceChild(a,e),b(e,!0))),a[B]=!0,a;if("function"==typeof n.nodeName)return x(e,n,t,o);if(q="svg"===n.nodeName||"foreignObject"!==n.nodeName&&q,(!e||!r(e,String(n.nodeName)))&&(a=u(String(n.nodeName),q),e)){for(;e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),b(e,!0)}var p=a.firstChild,s=a[B]||(a[B]={}),d=n.children;return!Q&&d&&1===d.length&&"string"==typeof d[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=d[0]&&(p.nodeValue=d[0]):(d&&d.length||null!=p)&&v(a,d,t,o,Q||null!=s.dangerouslySetInnerHTML),m(a,n.attributes,s),q=l,a}function v(e,n,t,o,i){var r=e.childNodes,l=[],u={},s=0,d=0,c=r.length,h=0,f=n?n.length:0,v=void 0,y=void 0,m=void 0,C=void 0;if(0!==c)for(var _=0;_<c;_++){var k=r[_],O=k[B],w=f&&O?k._component?k._component.__key:O.key:null;null!=w?(s++,u[w]=k):(O||(void 0!==k.splitText?!i||k.nodeValue.trim():i))&&(l[h++]=k)}if(0!==f)for(var x=0;x<f;x++){C=null;var P=(m=n[x]).key;if(null!=P)s&&void 0!==u[P]&&(C=u[P],u[P]=void 0,s--);else if(!C&&d<h)for(v=d;v<h;v++)if(void 0!==l[v]&&a(y=l[v],m,i)){C=y,l[v]=void 0,v===h-1&&h--,v===d&&d++;break}(C=g(C,m,t,o))&&C!==e&&(x>=c?e.appendChild(C):C!==r[x]&&(C===r[x+1]?p(r[x]):e.insertBefore(C,r[x]||null)))}if(s)for(var S in u)void 0!==u[S]&&b(u[S],!1);for(;d<=h;)void 0!==(C=l[h--])&&b(C,!1)}function b(e,n){var t=e._component;t?P(t):(null!=e[B]&&e[B].ref&&e[B].ref(null),!1!==n&&null!=e[B]||p(e),y(e))}function y(e){for(e=e.lastChild;e;){var n=e.previousSibling;b(e,!0),e=n}}function m(e,n,t){var o=void 0;for(o in t)n&&null!=n[o]||null==t[o]||s(e,o,t[o],t[o]=void 0,q);for(o in n)"children"===o||"innerHTML"===o||o in t&&n[o]===("value"===o||"checked"===o?e[o]:t[o])||s(e,o,t[o],t[o]=n[o],q)}function C(e){var n=e.constructor.name;(X[n]||(X[n]=[])).push(e)}function _(e,n,t){var o=X[e.name],i=void 0;if(e.prototype&&e.prototype.render?(i=new e(n,t),S.call(i,n,t)):((i=new S(n,t)).constructor=e,i.render=k),o)for(var a=o.length;a--;)if(o[a].constructor===e){i.nextBase=o[a].nextBase,o.splice(a,1);break}return i}function k(e,n,t){return this.constructor(e,t)}function O(e,n,t,i,a){e._disable||(e._disable=!0,(e.__ref=n.ref)&&delete n.ref,(e.__key=n.key)&&delete n.key,!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),i&&i!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=i),e.prevProps||(e.prevProps=e.props),e.props=n,e._disable=!1,t!==L&&(t!==U&&!1===D.syncComponentUpdates&&e.base?o(e):w(e,U,a)),e.__ref&&e.__ref(e))}function w(e,n,o,i){if(!e._disable){var a=e.props,r=e.state,u=e.context,p=e.prevProps||a,s=e.prevState||r,d=e.prevContext||u,c=e.base,g=e.nextBase,v=c||g,y=e._component,m=!1,C=void 0,k=void 0,x=void 0;if(c&&(e.props=p,e.state=s,e.context=d,n!==z&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(a,r,u)?m=!0:e.componentWillUpdate&&e.componentWillUpdate(a,r,u),e.props=a,e.state=r,e.context=u),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!m){C=e.render(a,r,u),e.getChildContext&&(u=t(t({},u),e.getChildContext()));var S=C&&C.nodeName,j=void 0,N=void 0;if("function"==typeof S){var T=l(C);(k=y)&&k.constructor===S&&T.key==k.__key?O(k,T,U,u,!1):(j=k,e._component=k=_(S,T,u),k.nextBase=k.nextBase||g,k._parentComponent=e,O(k,T,L,u,!1),w(k,U,o,!0)),N=k.base}else x=v,(j=y)&&(x=e._component=null),(v||n===U)&&(x&&(x._component=null),N=f(x,C,u,o||!c,v&&v.parentNode,!0));if(v&&N!==v&&k!==y){var A=v.parentNode;A&&N!==A&&(A.replaceChild(N,v),j||(v._component=null,b(v,!1)))}if(j&&P(j),e.base=N,N&&!i){for(var E=e,G=e;G=G._parentComponent;)(E=G).base=N;N._component=E,N._componentConstructor=E.constructor}}if(!c||o?Z.unshift(e):m||(h(),e.componentDidUpdate&&e.componentDidUpdate(p,s,d),D.afterUpdate&&D.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);$||i||h()}}function x(e,n,t,o){for(var i=e&&e._component,a=i,r=e,u=i&&e._componentConstructor===n.nodeName,p=u,s=l(n);i&&!p&&(i=i._parentComponent);)p=i.constructor===n.nodeName;return i&&p&&(!o||i._component)?(O(i,s,G,t,o),e=i.base):(a&&!u&&(P(a),e=r=null),i=_(n.nodeName,s,t),e&&!i.nextBase&&(i.nextBase=e,r=null),O(i,s,U,t,o),e=i.base,r&&e!==r&&(r._component=null,b(r,!1))),e}function P(e){D.beforeUnmount&&D.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var t=e._component;t?P(t):n&&(n[B]&&n[B].ref&&n[B].ref(null),e.nextBase=n,p(n),C(e),y(n)),e.__ref&&e.__ref(null)}function S(e,n){this._dirty=!0,this.context=n,this.props=e,this.state=this.state||{}}function j(e,n,t){return f(t,e,{},!1,n,!1)}function N(e,n){var t=K({},this.props[e]);n.target.value!==t[n.target.name]&&(n.target.value?t[n.target.name]=n.target.value:delete t[n.target.name],this.props.onChange(this.props.index,t))}function T(e){for(var n=Object.keys(Te),t=0;t<n.length;t++)if(Te[n[t]].configKey in e)return n[t];return null}var D={},A=[],E=[],L=0,U=1,z=2,G=3,B="__preactattr_",V=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,M=[],W="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)},I=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},H=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),J=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e},K=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},R=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":_typeof(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},F=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=(void 0===n?"undefined":_typeof(n))&&"function"!=typeof n?e:n},Z=[],$=0,q=!1,Q=!1,X={};t(S.prototype,{setState:function(e,n){var i=this.state;this.prevState||(this.prevState=t({},i)),t(i,"function"==typeof e?e(i,this.props):e),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),o(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),w(this,z)},render:function(){}});var Y=function(e){function t(e){I(this,t);var n=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state.isValid=!0,n.state.value=JSON.stringify(e.value||{},null,2),n.onChange=n.onChange.bind(n),n}return R(t,S),H(t,[{key:"onChange",value:function(e){var n=e.target.value,t=void 0,o=void 0;try{t=JSON.parse(n),o=!0}catch(e){o=!1}this.setState({value:n,isValid:o}),o&&this.props.onChange(t)}},{key:"componentWillReceiveProps",value:function(e){var n=e.value;this.setState({value:JSON.stringify(n,null,2),isValid:!0})}},{key:"render",value:function(e,t){var o=e.label,i=t.value,a={minWidth:300,width:"100%"};return t.isValid||(a.border="1px solid red"),n("paper-textarea",{label:o,value:i,style:a,"onvalue-changed":this.onChange})}}]),t}(),ee=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"trigger"),e.eventDataChanged=e.eventDataChanged.bind(e),e}return R(t,S),H(t,[{key:"eventDataChanged",value:function(e){this.props.onChange(this.props.index,K({},this.props.trigger,{event_data:e}))}},{key:"render",value:function(e){var t=e.trigger,o=t.event_type,i=t.event_data;return n("div",null,n("paper-input",{label:"Event Type",name:"event_type",value:o,onChange:this.onChange}),n(Y,{label:"Event Data",value:i,onChange:this.eventDataChanged}))}}]),t}();ee.defaultConfig={event_type:"",event_data:{}};var ne=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return R(t,S),H(t,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,K({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(e){var t=e.trigger.event;return n("div",null,n("label",{id:"eventlabel"},"Event:"),n("paper-radio-group",{selected:t,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},n("paper-radio-button",{name:"start"},"Start"),n("paper-radio-button",{name:"shutdown"},"Shutdown")))}}]),t}();ne.defaultConfig={event:"start"};var te=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"trigger"),e}return R(t,S),H(t,[{key:"render",value:function(e){var t=e.trigger,o=t.topic,i=t.payload;return n("div",null,n("paper-input",{label:"Topic",name:"topic",value:o,onChange:this.onChange}),n("paper-input",{label:"Payload (Optional)",name:"payload",value:i,onChange:this.onChange}))}}]),t}();te.defaultConfig={topic:""};var oe=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"trigger"),e}return R(t,S),H(t,[{key:"render",value:function(e){var t=e.trigger,o=t.value_template,i=t.entity_id,a=t.below,r=t.above;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:i,onChange:this.onChange}),n("paper-input",{label:"Above",name:"above",value:r,onChange:this.onChange}),n("paper-input",{label:"Below",name:"below",value:a,onChange:this.onChange}),n("paper-textarea",{label:"Value template (optional)",name:"value_template",value:o,"onvalue-changed":this.onChange}))}}]),t}();oe.defaultConfig={entity_id:""};var ie=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"trigger"),e}return R(t,S),H(t,[{key:"render",value:function(e){var t=e.trigger,o=t.entity_id,i=t.to,a=t.from,r=t.for;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"From",name:"from",value:a,onChange:this.onChange}),n("paper-input",{label:"To",name:"to",value:i,onChange:this.onChange}),r&&n("pre",null,"For: ",JSON.stringify(r,null,2)))}}]),t}();ie.defaultConfig={entity_id:""};var ae=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"trigger"),e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return R(t,S),H(t,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,K({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(e){var t=e.trigger,o=t.offset,i=t.event;return n("div",null,n("label",{id:"eventlabel"},"Event:"),n("paper-radio-group",{selected:i,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},n("paper-radio-button",{name:"sunrise"},"Sunrise"),n("paper-radio-button",{name:"sunset"},"Sunset")),n("paper-input",{label:"Offset (optional)",name:"offset",value:o,onChange:this.onChange}))}}]),t}();ae.defaultConfig={event:"sunrise"};var re=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"trigger"),e}return R(t,S),H(t,[{key:"render",value:function(e){return n("div",null,n("paper-textarea",{label:"Value Template",name:"value_template",value:e.trigger.value_template,"onvalue-changed":this.onChange}))}}]),t}();re.defaultConfig={value_template:""};var le=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"trigger"),e}return R(t,S),H(t,[{key:"render",value:function(e){return n("div",null,n("paper-input",{label:"At",name:"at",value:e.trigger.at,onChange:this.onChange}))}}]),t}();le.defaultConfig={at:""};var ue=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"trigger"),e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return R(t,S),H(t,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,K({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(e){var t=e.trigger,o=t.entity_id,i=t.zone,a=t.event;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"Zone",name:"zone",value:i,onChange:this.onChange}),n("label",{id:"eventlabel"},"Event:"),n("paper-radio-group",{selected:a,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},n("paper-radio-button",{name:"enter"},"Enter"),n("paper-radio-button",{name:"leave"},"Leave")))}}]),t}();ue.defaultConfig={entity_id:"",zone:"",event:"enter"};var pe={event:ee,state:ie,homeassistant:ne,mqtt:te,numeric_state:oe,sun:ae,template:re,time:le,zone:ue},se=Object.keys(pe).sort(),de=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return R(t,S),H(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;n!==this.props.trigger.platform&&this.props.onChange(this.props.index,K({platform:n},pe[n].defaultConfig))}},{key:"render",value:function(e){var t=e.index,o=e.trigger,i=e.onChange,a=pe[o.platform],r=se.indexOf(o.platform);return a?n("div",null,n("paper-dropdown-menu-light",{label:"Trigger Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:r,"oniron-select":this.typeChanged},se.map(function(e){return n("paper-item",null,e)}))),n(a,{index:t,trigger:o,onChange:i})):n("div",null,"Unsupported platform: ",o.platform,n("pre",null,JSON.stringify(o,null,2)))}}]),t}(),ce=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onDelete=e.onDelete.bind(e),e}return R(t,S),H(t,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){return n("paper-card",null,n("div",{class:"card-menu"},n("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},n("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),n("paper-listbox",{slot:"dropdown-content"},n("paper-item",{disabled:!0},"Duplicate"),n("paper-item",{onTap:this.onDelete},"Delete")))),n("div",{class:"card-content"},n(de,e)))}}]),t}(),he=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addTrigger=e.addTrigger.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e}return R(t,S),H(t,[{key:"addTrigger",value:function(){var e=this.props.trigger.concat(K({platform:"state"},ie.defaultConfig));this.props.onChange(e)}},{key:"triggerChanged",value:function(e,n){var t=this.props.trigger.concat();null===n?t.splice(e,1):t[e]=n,this.props.onChange(t)}},{key:"render",value:function(e){var t=this;return n("div",{class:"triggers"},e.trigger.map(function(e,o){return n(ce,{index:o,trigger:e,onChange:t.triggerChanged})}),n("paper-card",null,n("div",{class:"card-actions add-card"},n("paper-button",{onTap:this.addTrigger},"Add trigger"))))}}]),t}(),fe=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"condition"),e}return R(t,S),H(t,[{key:"render",value:function(e){var t=e.condition,o=t.value_template,i=t.entity_id,a=t.below,r=t.above;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:i,onChange:this.onChange}),n("paper-input",{label:"Above",name:"above",value:r,onChange:this.onChange}),n("paper-input",{label:"Below",name:"below",value:a,onChange:this.onChange}),n("paper-textarea",{label:"Value template (optional)",name:"value_template",value:o,"onvalue-changed":this.onChange}))}}]),t}();fe.defaultConfig={entity_id:""};var ge=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"condition"),e}return R(t,S),H(t,[{key:"render",value:function(e){var t=e.condition,o=t.entity_id,i=t.state,a=t.for;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"State",name:"state",value:i,onChange:this.onChange}),a&&n("pre",null,"For: ",JSON.stringify(a,null,2)))}}]),t}();ge.defaultConfig={entity_id:"",state:""};var ve=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"condition"),e.afterPicked=e.radioGroupPicked.bind(e,"after"),e.beforePicked=e.radioGroupPicked.bind(e,"before"),e}return R(t,S),H(t,[{key:"radioGroupPicked",value:function(e,n){var t=K({},this.props.condition);n.target.selected?t[e]=n.target.selected:delete t[e],this.props.onChange(this.props.index,t)}},{key:"render",value:function(e){var t=e.condition,o=t.after,i=t.after_offset,a=t.before,r=t.before_offset;return n("div",null,n("label",{id:"beforelabel"},"Before:"),n("paper-radio-group",{"allow-empty-selection":!0,selected:a,"aria-labelledby":"beforelabel","onpaper-radio-group-changed":this.beforePicked},n("paper-radio-button",{name:"sunrise"},"Sunrise"),n("paper-radio-button",{name:"sunset"},"Sunset")),n("paper-input",{label:"Before offset (optional)",name:"before_offset",value:r,onChange:this.onChange,disabled:void 0===a}),n("label",{id:"afterlabel"},"After:"),n("paper-radio-group",{"allow-empty-selection":!0,selected:o,"aria-labelledby":"afterlabel","onpaper-radio-group-changed":this.afterPicked},n("paper-radio-button",{name:"sunrise"},"Sunrise"),n("paper-radio-button",{name:"sunset"},"Sunset")),n("paper-input",{label:"After offset (optional)",name:"after_offset",value:i,onChange:this.onChange,disabled:void 0===o}))}}]),t}();ve.defaultConfig={};var be=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"condition"),e}return R(t,S),H(t,[{key:"render",value:function(e){return n("div",null,n("paper-textarea",{label:"Value Template",name:"value_template",value:e.condition.value_template,"onvalue-changed":this.onChange}))}}]),t}();be.defaultConfig={value_template:""};var ye=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"condition"),e}return R(t,S),H(t,[{key:"render",value:function(e){var t=e.condition,o=t.after,i=t.before;return n("div",null,n("paper-input",{label:"After",name:"after",value:o,onChange:this.onChange}),n("paper-input",{label:"Before",name:"before",value:i,onChange:this.onChange}))}}]),t}();ye.defaultConfig={};var me=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"condition"),e}return R(t,S),H(t,[{key:"render",value:function(e){var t=e.condition,o=t.entity_id,i=t.zone;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"Zone entity id",name:"zone",value:i,onChange:this.onChange}))}}]),t}();me.defaultConfig={entity_id:"",zone:""};var Ce={state:ge,numeric_state:fe,sun:ve,template:be,time:ye,zone:me},_e=Object.keys(Ce).sort(),ke=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return R(t,S),H(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;n!==this.props.condition.condition&&this.props.onChange(this.props.index,K({condition:n},Ce[n].defaultConfig))}},{key:"render",value:function(e){var t=e.index,o=e.condition,i=e.onChange,a=Ce[o.condition],r=_e.indexOf(o.condition);return a?n("div",null,n("paper-dropdown-menu-light",{label:"Condition Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:r,"oniron-select":this.typeChanged},_e.map(function(e){return n("paper-item",null,e)}))),n(a,{index:t,condition:o,onChange:i})):n("div",null,"Unsupported condition: ",o.condition,n("pre",null,JSON.stringify(o,null,2)))}}]),t}(),Oe=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onDelete=e.onDelete.bind(e),e}return R(t,S),H(t,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){return n("paper-card",null,n("div",{class:"card-menu"},n("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},n("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),n("paper-listbox",{slot:"dropdown-content"},n("paper-item",{disabled:!0},"Duplicate"),n("paper-item",{onTap:this.onDelete},"Delete")))),n("div",{class:"card-content"},n(ke,e)))}}]),t}(),we=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addCondition=e.addCondition.bind(e),e.conditionChanged=e.conditionChanged.bind(e),e}return R(t,S),H(t,[{key:"addCondition",value:function(){var e=this.props.condition.concat({condition:"state"});this.props.onChange(e)}},{key:"conditionChanged",value:function(e,n){var t=this.props.condition.concat();null===n?t.splice(e,1):t[e]=n,this.props.onChange(t)}},{key:"render",value:function(e){var t=this;return n("div",{class:"triggers"},e.condition.map(function(e,o){return n(Oe,{index:o,condition:e,onChange:t.conditionChanged})}),n("paper-card",null,n("div",{class:"card-actions add-card"},n("paper-button",{onTap:this.addCondition},"Add condition"))))}}]),t}(),xe=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return R(t,S),H(t,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,K({},this.props.action,{data:e}))}},{key:"render",value:function(e){var t=e.action,o=t.alias,i=t.service,a=t.data;return n("div",null,n("paper-input",{label:"Alias",name:"alias",value:o,onChange:this.onChange}),n("paper-input",{label:"Service",name:"service",value:i,onChange:this.onChange}),n(Y,{label:"Service Data",value:a,onChange:this.serviceDataChanged}))}}]),t}();xe.configKey="service",xe.defaultConfig={alias:"",service:"",data:{}};var Pe=function(e){function t(){return I(this,t),F(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return R(t,S),H(t,[{key:"render",value:function(e){var t=e.action,o=e.index,i=e.onChange;return n(ke,{condition:t,onChange:i,index:o})}}]),t}();Pe.configKey="condition",Pe.defaultConfig=K({condition:"state"},ge.defaultConfig);var Se=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"action"),e}return R(t,S),H(t,[{key:"render",value:function(e){return n("div",null,n("paper-input",{label:"Delay",name:"delay",value:e.action.delay,onChange:this.onChange}))}}]),t}();Se.configKey="delay",Se.defaultConfig={delay:""};var je=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return R(t,S),H(t,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,K({},this.props.action,{data:e}))}},{key:"render",value:function(e){var t=e.action,o=t.event,i=t.event_data;return n("div",null,n("paper-input",{label:"Event",name:"event",value:o,onChange:this.onChange}),n(Y,{label:"Service Data",value:i,onChange:this.serviceDataChanged}))}}]),t}();je.configKey="event",je.defaultConfig={event:"",event_data:{}};var Ne=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=N.bind(e,"action"),e.onTemplateChange=e.onTemplateChange.bind(e),e}return R(t,S),H(t,[{key:"onTemplateChange",value:function(e){this.props.onChange(this.props.index,K({},this.props.trigger,J({},e.target.name,e.target.value)))}},{key:"render",value:function(e){var t=e.action,o=t.wait_template,i=t.timeout;return n("div",null,n("paper-textarea",{label:"Wait Template",name:"wait_template",value:o,"onvalue-changed":this.onTemplateChange}),n("paper-input",{label:"Timeout (Optional)",name:"timeout",value:i,onChange:this.onChange}))}}]),t}();Ne.configKey="wait_template",Ne.defaultConfig={wait_template:"",timeout:""};var Te={"Call Service":xe,Delay:Se,Wait:Ne,Condition:Pe,"Fire Event":je},De=Object.keys(Te).sort(),Ae=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return R(t,S),H(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;T(this.props.action)!==n&&this.props.onChange(this.props.index,Te[n].defaultConfig)}},{key:"render",value:function(e){var t=e.index,o=e.action,i=e.onChange,a=T(o),r=a&&Te[a],l=De.indexOf(a);return r?n("div",null,n("paper-dropdown-menu-light",{label:"Action Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:l,"oniron-select":this.typeChanged},De.map(function(e){return n("paper-item",null,e)}))),n(r,{index:t,action:o,onChange:i})):n("div",null,"Unsupported action",n("pre",null,JSON.stringify(o,null,2)))}}]),t}(),Ee=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onDelete=e.onDelete.bind(e),e}return R(t,S),H(t,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){return n("paper-card",null,n("div",{class:"card-menu"},n("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},n("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),n("paper-listbox",{slot:"dropdown-content"},n("paper-item",{disabled:!0},"Duplicate"),n("paper-item",{onTap:this.onDelete},"Delete")))),n("div",{class:"card-content"},n(Ae,e)))}}]),t}(),Le=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addAction=e.addAction.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return R(t,S),H(t,[{key:"addAction",value:function(){var e=this.props.script.concat({service:""});this.props.onChange(e)}},{key:"actionChanged",value:function(e,n){var t=this.props.script.concat();null===n?t.splice(e,1):t[e]=n,this.props.onChange(t)}},{key:"render",value:function(e){var t=this;return n("div",{class:"script"},e.script.map(function(e,o){return n(Ee,{index:o,action:e,onChange:t.actionChanged})}),n("paper-card",null,n("div",{class:"card-actions add-card"},n("paper-button",{onTap:this.addAction},"Add action"))))}}]),t}(),Ue=function(e){function t(){I(this,t);var e=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=e.onChange.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e.conditionChanged=e.conditionChanged.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return R(t,S),H(t,[{key:"onChange",value:function(e){this.props.onChange(K({},this.props.automation,J({},e.target.name,e.target.value)))}},{key:"triggerChanged",value:function(e){this.props.onChange(K({},this.props.automation,{trigger:e}))}},{key:"conditionChanged",value:function(e){this.props.onChange(K({},this.props.automation,{condition:e}))}},{key:"actionChanged",value:function(e){this.props.onChange(K({},this.props.automation,{action:e}))}},{key:"render",value:function(e){var t=e.automation,o=e.isWide,i=t.alias,a=t.trigger,r=t.condition,l=t.action;return n("div",null,n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},i),n("span",{slot:"introduction"},"Use automations to bring your home alive."),n("paper-card",null,n("div",{class:"card-content"},n("paper-input",{label:"Name",name:"alias",value:i,onChange:this.onChange})))),n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Triggers"),n("span",{slot:"introduction"},"Triggers are what starts the processing of an automation rule. It is possible to specify multiple triggers for the same rule. Once a trigger starts, Home Assistant will validate the conditions, if any, and call the action.",n("p",null,n("a",{href:"https://home-assistant.io/docs/automation/trigger/",target:"_blank"},"Learn more about triggers."))),n(he,{trigger:a,onChange:this.triggerChanged})),n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Conditions"),n("span",{slot:"introduction"},"Conditions are an optional part of an automation rule and can be used to prevent an action from happening when triggered. Conditions look very similar to triggers but are very different. A trigger will look at events happening in the system while a condition only looks at how the system looks right now. A trigger can observe that a switch is being turned on. A condition can only see if a switch is currently on or off.",n("p",null,n("a",{href:"https://home-assistant.io/docs/scripts/conditions/",target:"_blank"},"Learn more about conditions."))),n(we,{condition:r||[],onChange:this.conditionChanged})),n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Action"),n("span",{slot:"introduction"},"The actions are what Home Assistant will do when the automation is triggered.",n("p",null,n("a",{href:"https://home-assistant.io/docs/scripts/",target:"_blank"},"Learn more about actions."))),n(Le,{script:l,onChange:this.actionChanged})))}}]),t}();window.AutomationEditor=function(e,t,o){return j(n(Ue,t),e,o)},window.unmountPreact=function(e,n){j(function(){return null},e,n)}}();</script><dom-module id="ha-automation-editor" assetpath="automation/"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="backTapped"></paper-icon-button><div main-title="">Automation [[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div><paper-fab is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="Save" on-tap="saveAutomation"></paper-fab></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-automation-editor",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},automation:{type:Object,observer:"automationChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(automation)"},isWide:{type:Boolean,observer:"isWideChanged"}},created:function(){this.configChanged=this.configChanged.bind(this),this._rendered=null},detached:function(){this._rendered&&window.unmountPreact(this._rendered)},configChanged:function(t){null!==this._rendered&&(this.config=t,this.errors=null,this.dirty=!0,this._updateComponent(t))},automationChanged:function(t,i){t&&(this.hass?i&&i.attributes.id===t.attributes.id||this.hass.callApi("get","config/automation/config/"+t.attributes.id).then(function(t){["trigger","condition","action"].forEach(function(i){var e=t[i];e&&!Array.isArray(e)&&(t[i]=[e])}),this.dirty=!1,this.config=t,this._updateComponent()}.bind(this)):setTimeout(this.automationChanged.bind(this,t,i),0))},creatingNewChanged:function(t){t&&(this.dirty=!1,this.config={alias:"New Automation",trigger:[{platform:"state"}],condition:[],action:[{service:""}]},this._updateComponent())},isWideChanged:function(){null!==this.config&&this._updateComponent()},backTapped:function(){this.dirty&&!confirm("You have unsaved changes. Are you sure you want to leave?")||history.back()},_updateComponent:function(){this._rendered=window.AutomationEditor(this.$.root,{automation:this.config,onChange:this.configChanged,isWide:this.isWide},this._rendered)},saveAutomation:function(){var t=this.creatingNew?""+Date.now():this.automation.attributes.id;this.hass.callApi("post","config/automation/config/"+t,this.config).then(function(){this.dirty=!1,this.creatingNew&&(history.replaceState(null,null,"/config/automation/edit/"+t),this.fire("location-changed"))}.bind(this),function(t){throw this.errors=t.body.message,t}.bind(this))},computeName:function(t){return t&&window.hassUtil.computeStateName(t)}});</script><dom-module id="ha-config-automation" assetpath="automation/"><template><style>ha-automation-picker,
      ha-automation-editor{height:100%;}</style><app-route route="[[route]]" pattern="/edit/:automation" data="{{_routeData}}" active="{{_edittingAutomation}}"></app-route><app-route route="[[route]]" pattern="/new" active="{{_creatingNew}}"></app-route><template is="dom-if" if="[[!showEditor]]"><ha-automation-picker narrow="[[narrow]]" show-menu="[[showMenu]]" automations="[[automations]]" is-wide="[[isWide]]"></ha-automation-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-automation-editor hass="[[hass]]" automation="[[automation]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-automation-editor></template></template></dom-module><script>Polymer({is:"ha-config-automation",properties:{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,isWide:Boolean,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingAutomation:Boolean,automations:{type:Array,computed:"computeAutomations(hass)"},automation:{type:Object,computed:"computeAutomation(automations, _edittingAutomation, _routeData)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingAutomation, _creatingNew)"}},computeAutomation:function(t,o,e){if(!t||!o)return null;for(var a=0;a<t.length;a++)if(t[a].attributes.id===e.automation)return t[a];return null},computeAutomations:function(t){var o=[];return Object.keys(t.states).forEach(function(e){var a=t.states[e];"automation"===window.hassUtil.computeDomain(a)&&"id"in a.attributes&&o.push(a)}),o.sort(function(t,o){var e=(t.attributes.alias||t.entity_id).toLowerCase(),a=(o.attributes.alias||o.entity_id).toLowerCase();return e<a?-1:e>a?1:0})},computeShowEditor:function(t,o){return o||t}});</script><dom-module id="ha-script-picker" assetpath="script/"><template><style include="ha-style">:host{display:block;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Scripts</div></app-toolbar></app-header><ha-config-section is-wide="[[isWide]]"><div slot="header">Script editor</div><div slot="introduction">The script editor allows you to create and edit scripts. Please read <a href="https://home-assistant.io/docs/script/editor/" target="_blank">the instructions</a> to make sure that you have configured Home Assistant correctly.</div><paper-card heading="Pick script to edit"><template is="dom-if" if="[[!scripts.length]]"><div class="card-content"><p>We couldn't find any editable scripts.</p></div></template><template is="dom-repeat" items="[[scripts]]" as="script"><paper-item><paper-item-body two-line="" on-tap="scriptTapped"><div>[[computeName(script)]]</div><div secondary="">[[computeDescription(script)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></paper-card></ha-config-section><paper-fab is-wide$="[[isWide]]" icon="mdi:plus" title="Add Script" on-tap="addScript"></paper-fab></app-header-layout></template></dom-module><script>Polymer({is:"ha-script-picker",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},scripts:{type:Array},isWide:{type:Boolean}},scriptTapped:function(t){history.pushState(null,null,"/config/script/edit/"+this.scripts[t.model.index].entity_id),this.fire("location-changed")},addScript:function(){history.pushState(null,null,"/config/script/new"),this.fire("location-changed")},computeName:function(t){return window.hassUtil.computeStateName(t)},computeDescription:function(t){return""},_backTapped:function(){history.back()}});</script><script>var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(){}function n(n,t){var o=A,i=void 0,r=void 0,a=void 0,l=void 0;for(l=arguments.length;l-- >2;)U.push(arguments[l]);for(t&&null!=t.children&&(U.length||U.push(t.children),delete t.children);U.length;)if((r=U.pop())&&void 0!==r.pop)for(l=r.length;l--;)U.push(r[l]);else!0!==r&&!1!==r||(r=null),(a="function"!=typeof n)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(a=!1)),a&&i?o[o.length-1]+=r:o===A?o=[r]:o.push(r),i=a;var u=new e;return u.nodeName=n,u.children=o,u.attributes=null==t?void 0:t,u.key=null==t?void 0:t.key,void 0!==D.vnode&&D.vnode(u),u}function t(e,n){for(var t in n)e[t]=n[t];return e}function o(e){!e._dirty&&(e._dirty=!0)&&1==q.push(e)&&(D.debounceRendering||setTimeout)(i)}function i(){var e=void 0,n=q;for(q=[];e=n.pop();)e._dirty&&O(e)}function r(e,n,t){return"string"==typeof n||"number"==typeof n?void 0!==e.splitText:"string"==typeof n.nodeName?!e._componentConstructor&&a(e,n.nodeName):t||e._componentConstructor===n.nodeName}function a(e,n){return e.normalizedNodeName===n||e.nodeName.toLowerCase()===n.toLowerCase()}function l(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var i in o)void 0===n[i]&&(n[i]=o[i]);return n}function u(e,n){var t=n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t.normalizedNodeName=e,t}function s(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,n,t,o,i){if("className"===n&&(n="class"),"key"===n);else if("ref"===n)t&&t(null),o&&o(e);else if("class"!==n||i)if("style"===n){if(o&&"string"!=typeof o&&"string"!=typeof t||(e.style.cssText=o||""),o&&"object"===(void 0===o?"undefined":z(o))){if("string"!=typeof t)for(var r in t)r in o||(e.style[r]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===V.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===n)o&&(e.innerHTML=o.__html||"");else if("o"==n[0]&&"n"==n[1]){var l=n!==(n=n.replace(/Capture$/,""));n=n.toLowerCase().substring(2),o?t||e.addEventListener(n,d,l):e.removeEventListener(n,d,l),(e._listeners||(e._listeners={}))[n]=o}else if("list"!==n&&"type"!==n&&!i&&n in e)c(e,n,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(n);else{var u=i&&n!==(n=n.replace(/^xlink\:?/,""));null==o||!1===o?u?e.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):e.removeAttribute(n):"function"!=typeof o&&(u?e.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),o):e.setAttribute(n,o))}else e.className=o||""}function c(e,n,t){try{e[n]=t}catch(e){}}function d(e){return this._listeners[e.type](D.event&&D.event(e)||e)}function f(){for(var e=void 0;e=F.pop();)D.afterMount&&D.afterMount(e),e.componentDidMount&&e.componentDidMount()}function h(e,n,t,o,i,r){$++||(Z=null!=i&&void 0!==i.ownerSVGElement,Q=null!=e&&!(M in e));var a=v(e,n,t,o,r);return i&&a.parentNode!==i&&i.appendChild(a),--$||(Q=!1,r||f()),a}function v(e,n,t,o,i){var r=e,l=Z;if(null==n&&(n=""),"string"==typeof n)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=n&&(e.nodeValue=n):(r=document.createTextNode(n),e&&(e.parentNode&&e.parentNode.replaceChild(r,e),b(e,!0))),r[M]=!0,r;if("function"==typeof n.nodeName)return w(e,n,t,o);if(Z="svg"===n.nodeName||"foreignObject"!==n.nodeName&&Z,(!e||!a(e,String(n.nodeName)))&&(r=u(String(n.nodeName),Z),e)){for(;e.firstChild;)r.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(r,e),b(e,!0)}var s=r.firstChild,p=r[M]||(r[M]={}),c=n.children;return!Q&&c&&1===c.length&&"string"==typeof c[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=c[0]&&(s.nodeValue=c[0]):(c&&c.length||null!=s)&&g(r,c,t,o,Q||null!=p.dangerouslySetInnerHTML),m(r,n.attributes,p),Z=l,r}function g(e,n,t,o,i){var a=e.childNodes,l=[],u={},p=0,c=0,d=a.length,f=0,h=n?n.length:0,g=void 0,y=void 0,m=void 0,_=void 0;if(0!==d)for(var C=0;C<d;C++){var k=a[C],x=k[M],O=h&&x?k._component?k._component.__key:x.key:null;null!=O?(p++,u[O]=k):(x||(void 0!==k.splitText?!i||k.nodeValue.trim():i))&&(l[f++]=k)}if(0!==h)for(var w=0;w<h;w++){_=null;var S=(m=n[w]).key;if(null!=S)p&&void 0!==u[S]&&(_=u[S],u[S]=void 0,p--);else if(!_&&c<f)for(g=c;g<f;g++)if(void 0!==l[g]&&r(y=l[g],m,i)){_=y,l[g]=void 0,g===f-1&&f--,g===c&&c++;break}(_=v(_,m,t,o))&&_!==e&&(w>=d?e.appendChild(_):_!==a[w]&&(_===a[w+1]?s(a[w]):e.insertBefore(_,a[w]||null)))}if(p)for(var N in u)void 0!==u[N]&&b(u[N],!1);for(;c<=f;)void 0!==(_=l[f--])&&b(_,!1)}function b(e,n){var t=e._component;t?S(t):(null!=e[M]&&e[M].ref&&e[M].ref(null),!1!==n&&null!=e[M]||s(e),y(e))}function y(e){for(e=e.lastChild;e;){var n=e.previousSibling;b(e,!0),e=n}}function m(e,n,t){var o=void 0;for(o in t)n&&null!=n[o]||null==t[o]||p(e,o,t[o],t[o]=void 0,Z);for(o in n)"children"===o||"innerHTML"===o||o in t&&n[o]===("value"===o||"checked"===o?e[o]:t[o])||p(e,o,t[o],t[o]=n[o],Z)}function _(e){var n=e.constructor.name;(X[n]||(X[n]=[])).push(e)}function C(e,n,t){var o=X[e.name],i=void 0;if(e.prototype&&e.prototype.render?(i=new e(n,t),N.call(i,n,t)):((i=new N(n,t)).constructor=e,i.render=k),o)for(var r=o.length;r--;)if(o[r].constructor===e){i.nextBase=o[r].nextBase,o.splice(r,1);break}return i}function k(e,n,t){return this.constructor(e,t)}function x(e,n,t,i,r){e._disable||(e._disable=!0,(e.__ref=n.ref)&&delete n.ref,(e.__key=n.key)&&delete n.key,!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),i&&i!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=i),e.prevProps||(e.prevProps=e.props),e.props=n,e._disable=!1,t!==B&&(t!==E&&!1===D.syncComponentUpdates&&e.base?o(e):O(e,E,r)),e.__ref&&e.__ref(e))}function O(e,n,o,i){if(!e._disable){var r=e.props,a=e.state,u=e.context,s=e.prevProps||r,p=e.prevState||a,c=e.prevContext||u,d=e.base,v=e.nextBase,g=d||v,y=e._component,m=!1,_=void 0,k=void 0,w=void 0;if(d&&(e.props=s,e.state=p,e.context=c,n!==L&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(r,a,u)?m=!0:e.componentWillUpdate&&e.componentWillUpdate(r,a,u),e.props=r,e.state=a,e.context=u),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!m){_=e.render(r,a,u),e.getChildContext&&(u=t(t({},u),e.getChildContext()));var N=_&&_.nodeName,P=void 0,j=void 0;if("function"==typeof N){var T=l(_);(k=y)&&k.constructor===N&&T.key==k.__key?x(k,T,E,u,!1):(P=k,e._component=k=C(N,T,u),k.nextBase=k.nextBase||v,k._parentComponent=e,x(k,T,B,u,!1),O(k,E,o,!0)),j=k.base}else w=g,(P=y)&&(w=e._component=null),(g||n===E)&&(w&&(w._component=null),j=h(w,_,u,o||!d,g&&g.parentNode,!0));if(g&&j!==g&&k!==y){var U=g.parentNode;U&&j!==U&&(U.replaceChild(j,g),P||(g._component=null,b(g,!1)))}if(P&&S(P),e.base=j,j&&!i){for(var A=e,W=e;W=W._parentComponent;)(A=W).base=j;j._component=A,j._componentConstructor=A.constructor}}if(!d||o?F.unshift(e):m||(f(),e.componentDidUpdate&&e.componentDidUpdate(s,p,c),D.afterUpdate&&D.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);$||i||f()}}function w(e,n,t,o){for(var i=e&&e._component,r=i,a=e,u=i&&e._componentConstructor===n.nodeName,s=u,p=l(n);i&&!s&&(i=i._parentComponent);)s=i.constructor===n.nodeName;return i&&s&&(!o||i._component)?(x(i,p,W,t,o),e=i.base):(r&&!u&&(S(r),e=a=null),i=C(n.nodeName,p,t),e&&!i.nextBase&&(i.nextBase=e,a=null),x(i,p,E,t,o),e=i.base,a&&e!==a&&(a._component=null,b(a,!1))),e}function S(e){D.beforeUnmount&&D.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var t=e._component;t?S(t):n&&(n[M]&&n[M].ref&&n[M].ref(null),e.nextBase=n,s(n),_(e),y(n)),e.__ref&&e.__ref(null)}function N(e,n){this._dirty=!0,this.context=n,this.props=e,this.state=this.state||{}}function P(e,n,t){return h(t,e,{},!1,n,!1)}function j(e,n){var t=K({},this.props[e]);n.target.value!==t[n.target.name]&&(n.target.value?t[n.target.name]=n.target.value:delete t[n.target.name],this.props.onChange(this.props.index,t))}function T(e){for(var n=Object.keys(he),t=0;t<n.length;t++)if(he[n[t]].configKey in e)return n[t];return null}var D={},U=[],A=[],B=0,E=1,L=2,W=3,M="__preactattr_",V=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,q=[],z="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)},I=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},H=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),J=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e},K=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},R=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":_typeof(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},G=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=(void 0===n?"undefined":_typeof(n))&&"function"!=typeof n?e:n},F=[],$=0,Z=!1,Q=!1,X={};t(N.prototype,{setState:function(e,n){var i=this.state;this.prevState||(this.prevState=t({},i)),t(i,"function"==typeof e?e(i,this.props):e),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),o(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),O(this,L)},render:function(){}});var Y=function(e){function t(e){I(this,t);var n=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state.isValid=!0,n.state.value=JSON.stringify(e.value||{},null,2),n.onChange=n.onChange.bind(n),n}return R(t,N),H(t,[{key:"onChange",value:function(e){var n=e.target.value,t=void 0,o=void 0;try{t=JSON.parse(n),o=!0}catch(e){o=!1}this.setState({value:n,isValid:o}),o&&this.props.onChange(t)}},{key:"componentWillReceiveProps",value:function(e){var n=e.value;this.setState({value:JSON.stringify(n,null,2),isValid:!0})}},{key:"render",value:function(e,t){var o=e.label,i=t.value,r={minWidth:300,width:"100%"};return t.isValid||(r.border="1px solid red"),n("paper-textarea",{label:o,value:i,style:r,"onvalue-changed":this.onChange})}}]),t}(),ee=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return R(t,N),H(t,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,K({},this.props.action,{data:e}))}},{key:"render",value:function(e){var t=e.action,o=t.alias,i=t.service,r=t.data;return n("div",null,n("paper-input",{label:"Alias",name:"alias",value:o,onChange:this.onChange}),n("paper-input",{label:"Service",name:"service",value:i,onChange:this.onChange}),n(Y,{label:"Service Data",value:r,onChange:this.serviceDataChanged}))}}]),t}();ee.configKey="service",ee.defaultConfig={alias:"",service:"",data:{}};var ne=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return R(t,N),H(t,[{key:"render",value:function(e){var t=e.condition,o=t.entity_id,i=t.state,r=t.for;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"State",name:"state",value:i,onChange:this.onChange}),r&&n("pre",null,"For: ",JSON.stringify(r,null,2)))}}]),t}();ne.defaultConfig={entity_id:"",state:""};var te=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return R(t,N),H(t,[{key:"render",value:function(e){var t=e.condition,o=t.value_template,i=t.entity_id,r=t.below,a=t.above;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:i,onChange:this.onChange}),n("paper-input",{label:"Above",name:"above",value:a,onChange:this.onChange}),n("paper-input",{label:"Below",name:"below",value:r,onChange:this.onChange}),n("paper-textarea",{label:"Value template (optional)",name:"value_template",value:o,"onvalue-changed":this.onChange}))}}]),t}();te.defaultConfig={entity_id:""};var oe=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e.afterPicked=e.radioGroupPicked.bind(e,"after"),e.beforePicked=e.radioGroupPicked.bind(e,"before"),e}return R(t,N),H(t,[{key:"radioGroupPicked",value:function(e,n){var t=K({},this.props.condition);n.target.selected?t[e]=n.target.selected:delete t[e],this.props.onChange(this.props.index,t)}},{key:"render",value:function(e){var t=e.condition,o=t.after,i=t.after_offset,r=t.before,a=t.before_offset;return n("div",null,n("label",{id:"beforelabel"},"Before:"),n("paper-radio-group",{"allow-empty-selection":!0,selected:r,"aria-labelledby":"beforelabel","onpaper-radio-group-changed":this.beforePicked},n("paper-radio-button",{name:"sunrise"},"Sunrise"),n("paper-radio-button",{name:"sunset"},"Sunset")),n("paper-input",{label:"Before offset (optional)",name:"before_offset",value:a,onChange:this.onChange,disabled:void 0===r}),n("label",{id:"afterlabel"},"After:"),n("paper-radio-group",{"allow-empty-selection":!0,selected:o,"aria-labelledby":"afterlabel","onpaper-radio-group-changed":this.afterPicked},n("paper-radio-button",{name:"sunrise"},"Sunrise"),n("paper-radio-button",{name:"sunset"},"Sunset")),n("paper-input",{label:"After offset (optional)",name:"after_offset",value:i,onChange:this.onChange,disabled:void 0===o}))}}]),t}();oe.defaultConfig={};var ie=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return R(t,N),H(t,[{key:"render",value:function(e){return n("div",null,n("paper-textarea",{label:"Value Template",name:"value_template",value:e.condition.value_template,"onvalue-changed":this.onChange}))}}]),t}();ie.defaultConfig={value_template:""};var re=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return R(t,N),H(t,[{key:"render",value:function(e){var t=e.condition,o=t.after,i=t.before;return n("div",null,n("paper-input",{label:"After",name:"after",value:o,onChange:this.onChange}),n("paper-input",{label:"Before",name:"before",value:i,onChange:this.onChange}))}}]),t}();re.defaultConfig={};var ae=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"condition"),e}return R(t,N),H(t,[{key:"render",value:function(e){var t=e.condition,o=t.entity_id,i=t.zone;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"Zone entity id",name:"zone",value:i,onChange:this.onChange}))}}]),t}();ae.defaultConfig={entity_id:"",zone:""};var le={state:ne,numeric_state:te,sun:oe,template:ie,time:re,zone:ae},ue=Object.keys(le).sort(),se=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return R(t,N),H(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;n!==this.props.condition.condition&&this.props.onChange(this.props.index,K({condition:n},le[n].defaultConfig))}},{key:"render",value:function(e){var t=e.index,o=e.condition,i=e.onChange,r=le[o.condition],a=ue.indexOf(o.condition);return r?n("div",null,n("paper-dropdown-menu-light",{label:"Condition Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:a,"oniron-select":this.typeChanged},ue.map(function(e){return n("paper-item",null,e)}))),n(r,{index:t,condition:o,onChange:i})):n("div",null,"Unsupported condition: ",o.condition,n("pre",null,JSON.stringify(o,null,2)))}}]),t}(),pe=function(e){function t(){return I(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return R(t,N),H(t,[{key:"render",value:function(e){var t=e.action,o=e.index,i=e.onChange;return n(se,{condition:t,onChange:i,index:o})}}]),t}();pe.configKey="condition",pe.defaultConfig=K({condition:"state"},ne.defaultConfig);var ce=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"action"),e}return R(t,N),H(t,[{key:"render",value:function(e){return n("div",null,n("paper-input",{label:"Delay",name:"delay",value:e.action.delay,onChange:this.onChange}))}}]),t}();ce.configKey="delay",ce.defaultConfig={delay:""};var de=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return R(t,N),H(t,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,K({},this.props.action,{data:e}))}},{key:"render",value:function(e){var t=e.action,o=t.event,i=t.event_data;return n("div",null,n("paper-input",{label:"Event",name:"event",value:o,onChange:this.onChange}),n(Y,{label:"Service Data",value:i,onChange:this.serviceDataChanged}))}}]),t}();de.configKey="event",de.defaultConfig={event:"",event_data:{}};var fe=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=j.bind(e,"action"),e.onTemplateChange=e.onTemplateChange.bind(e),e}return R(t,N),H(t,[{key:"onTemplateChange",value:function(e){this.props.onChange(this.props.index,K({},this.props.trigger,J({},e.target.name,e.target.value)))}},{key:"render",value:function(e){var t=e.action,o=t.wait_template,i=t.timeout;return n("div",null,n("paper-textarea",{label:"Wait Template",name:"wait_template",value:o,"onvalue-changed":this.onTemplateChange}),n("paper-input",{label:"Timeout (Optional)",name:"timeout",value:i,onChange:this.onChange}))}}]),t}();fe.configKey="wait_template",fe.defaultConfig={wait_template:"",timeout:""};var he={"Call Service":ee,Delay:ce,Wait:fe,Condition:pe,"Fire Event":de},ve=Object.keys(he).sort(),ge=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return R(t,N),H(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;T(this.props.action)!==n&&this.props.onChange(this.props.index,he[n].defaultConfig)}},{key:"render",value:function(e){var t=e.index,o=e.action,i=e.onChange,r=T(o),a=r&&he[r],l=ve.indexOf(r);return a?n("div",null,n("paper-dropdown-menu-light",{label:"Action Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:l,"oniron-select":this.typeChanged},ve.map(function(e){return n("paper-item",null,e)}))),n(a,{index:t,action:o,onChange:i})):n("div",null,"Unsupported action",n("pre",null,JSON.stringify(o,null,2)))}}]),t}(),be=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onDelete=e.onDelete.bind(e),e}return R(t,N),H(t,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){return n("paper-card",null,n("div",{class:"card-menu"},n("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},n("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),n("paper-listbox",{slot:"dropdown-content"},n("paper-item",{disabled:!0},"Duplicate"),n("paper-item",{onTap:this.onDelete},"Delete")))),n("div",{class:"card-content"},n(ge,e)))}}]),t}(),ye=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addAction=e.addAction.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return R(t,N),H(t,[{key:"addAction",value:function(){var e=this.props.script.concat({service:""});this.props.onChange(e)}},{key:"actionChanged",value:function(e,n){var t=this.props.script.concat();null===n?t.splice(e,1):t[e]=n,this.props.onChange(t)}},{key:"render",value:function(e){var t=this;return n("div",{class:"script"},e.script.map(function(e,o){return n(be,{index:o,action:e,onChange:t.actionChanged})}),n("paper-card",null,n("div",{class:"card-actions add-card"},n("paper-button",{onTap:this.addAction},"Add action"))))}}]),t}(),me=function(e){function t(){I(this,t);var e=G(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=e.onChange.bind(e),e.sequenceChanged=e.sequenceChanged.bind(e),e}return R(t,N),H(t,[{key:"onChange",value:function(e){this.props.onChange(K({},this.props.script,J({},e.target.name,e.target.value)))}},{key:"sequenceChanged",value:function(e){this.props.onChange(K({},this.props.script,{sequence:e}))}},{key:"render",value:function(e){var t=e.script,o=e.isWide,i=t.alias,r=t.sequence;return n("div",null,n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},i),n("span",{slot:"introduction"},"Use scripts to execute a sequence of actions."),n("paper-card",null,n("div",{class:"card-content"},n("paper-input",{label:"Name",name:"alias",value:i,onChange:this.onChange})))),n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Sequence"),n("span",{slot:"introduction"},"The sequence of actions of this script.",n("p",null,n("a",{href:"https://home-assistant.io/docs/scripts/",target:"_blank"},"Learn more about available actions."))),n(ye,{script:r,onChange:this.sequenceChanged})))}}]),t}();window.ScriptEditor=function(e,t,o){return P(n(me,t),e,o)},window.unmountPreact=function(e,n){P(function(){return null},e,n)}}();</script><dom-module id="ha-script-editor" assetpath="script/"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="backTapped"></paper-icon-button><div main-title="">Script [[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div><paper-fab is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="Save" on-tap="saveScript"></paper-fab></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-script-editor",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},script:{type:Object,observer:"scriptChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(script)"},isWide:{type:Boolean,observer:"isWideChanged"}},created:function(){this.configChanged=this.configChanged.bind(this),this._rendered=null},detached:function(){this._rendered&&window.unmountPreact(this._rendered)},configChanged:function(e){null!==this._rendered&&(this.config=e,this.errors=null,this.dirty=!0,this._updateComponent(e))},scriptChanged:function(e,t){e&&(this.hass?t&&t.entity_id===e.entity_id||this.hass.callApi("get","config/script/config/"+window.hassUtil.computeObjectId(e)).then(function(e){var t=e.sequence;t&&!Array.isArray(t)&&(e.sequence=[t]),this.dirty=!1,this.config=e,this._updateComponent()}.bind(this)):setTimeout(this.scriptChanged.bind(this,e,t),0))},creatingNewChanged:function(e){e&&(this.dirty=!1,this.config={alias:"New Script",sequence:[{service:"",data:{}}]},this._updateComponent())},isWideChanged:function(){null!==this.config&&this._updateComponent()},backTapped:function(){this.dirty&&!confirm("You have unsaved changes. Are you sure you want to leave?")||history.back()},_updateComponent:function(){this._rendered=window.ScriptEditor(this.$.root,{script:this.config,onChange:this.configChanged,isWide:this.isWide},this._rendered)},saveScript:function(){var e=this.creatingNew?""+Date.now():window.hassUtil.computeObjectId(this.script);this.hass.callApi("post","config/script/config/"+e,this.config).then(function(){this.dirty=!1,this.creatingNew&&(history.replaceState(null,null,"/config/script/edit/"+e),this.fire("location-changed"))}.bind(this),function(e){throw this.errors=e.body.message,e}.bind(this))},computeName:function(e){return e&&window.hassUtil.computeStateName(e)}});</script><dom-module id="ha-config-script" assetpath="script/"><template><style>ha-script-picker,
      ha-script-editor{height:100%;}</style><app-route route="[[route]]" pattern="/edit/:script" data="{{_routeData}}" active="{{_edittingScript}}"></app-route><app-route route="[[route]]" pattern="/new" active="{{_creatingNew}}"></app-route><template is="dom-if" if="[[!showEditor]]"><ha-script-picker narrow="[[narrow]]" show-menu="[[showMenu]]" scripts="[[scripts]]" is-wide="[[isWide]]"></ha-script-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-script-editor hass="[[hass]]" script="[[script]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-script-editor></template></template></dom-module><script>Polymer({is:"ha-config-script",properties:{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,isWide:Boolean,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingScript:Boolean,scripts:{type:Array,computed:"computeScripts(hass)"},script:{type:Object,computed:"computeScript(scripts, _edittingScript, _routeData)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingScript, _creatingNew)"}},computeScript:function(t,e,o){if(!t||!e)return null;for(var r=0;r<t.length;r++)if(t[r].entity_id===o.script)return t[r];return null},computeScripts:function(t){var e=[];return Object.keys(t.states).forEach(function(o){var r=t.states[o];"script"===window.hassUtil.computeDomain(r)&&e.push(r)}),e.sort(function(t,e){var o=window.hassUtil.computeStateName(t),r=window.hassUtil.computeStateName(e);return o<r?-1:o>r?1:0})},computeShowEditor:function(t,e){return e||t}});</script><dom-module id="ha-service-description" assetpath="../../src/components/"><template>[[_getDescription(hass, domain, service)]]</template></dom-module><script>Polymer({is:"ha-service-description",properties:{hass:Object,domain:String,service:String},_getDescription:function(i,r,e){var n=i.config.services[r];if(!n)return"";var s=n[e];return s?s.description:""}});</script><dom-module id="ozw-log" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}</style><paper-card heading="OZW Log"><div class="help-text"><pre>[[ozwLogs]]</pre></div><div class="card-actions"><paper-button raised="" on-tap="refreshLog">Refresh</paper-button></div></paper-card></template></dom-module><script>Polymer({is:"ozw-log",properties:{hass:{type:Object},ozwLogs:{type:String,value:""}},refreshLog:function(){this.ozwLogs="Loading ozw log...",this.hass.callApi("GET","zwave/ozwlog").then(function(o){this.ozwLogs=o}.bind(this))}});</script><dom-module id="zwave-network" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.card-actions.warning ha-call-service-button{color:var(--google-red-500);}.toggle-help-icon{position:absolute;top:6px;right:0;color:var(--primary-color);}ha-service-description{display:block;color:grey;}[hidden]{display:none;}</style><paper-card heading="Z-Wave Network Management"><paper-icon-button class="toggle-help-icon" on-tap="helpTap" icon="mdi:help-circle"></paper-icon-button><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node_secure">Add Node Secure</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node_secure" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node">Add Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_node">Remove Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_node" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions warning"><ha-call-service-button hass="[[hass]]" domain="zwave" service="cancel_command">Cancel Command</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="cancel_command" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="heal_network">Heal Network</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="start_network">Start Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="start_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="stop_network">Stop Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="stop_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="soft_reset">Soft Reset</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="soft_reset" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="test_network">Test Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="test_network" hidden$="[[!showDescription]]"></ha-service-description></div></paper-card></template></dom-module><script>Polymer({is:"zwave-network",properties:{hass:{type:Object},showDescription:{type:Boolean,value:!1}},helpTap:function(){this.showDescription=!this.showDescription}});</script><dom-module id="zwave-node-information" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}.node-info{margin-left:16px;}paper-card{display:block;margin:0 auto;max-width:600px;}paper-button[toggles][active]{background:lightgray;}</style><div class="content"><paper-card heading="Node Information"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{nodeInfoActive}}">Show</paper-button></div><template is="dom-if" if="{{nodeInfoActive}}"><template is="dom-repeat" items="[[selectedNodeAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-node-information",properties:{nodes:{type:Array,observer:"nodeChanged"},selectedNode:{type:Number,value:-1,observer:"nodeChanged"},selectedNodeAttrs:{type:Array},nodeInfoActive:{type:Boolean}},nodeChanged:function(e){if(this.nodes&&-1!==e){var t=this.nodes[this.selectedNode].attributes,o=[];Object.keys(t).forEach(function(e){o.push(e+": "+t[e])}),this.selectedNodeAttrs=o.sort()}}});</script><dom-module id="zwave-values" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node Values"><div class="device-picker"><paper-dropdown-menu label="Value" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedValue}}"><template is="dom-repeat" items="[[values]]" as="item"><paper-item>[[computeSelectCaption(item)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsValueSelected(selectedValue)]]"><div class="card-actions"><paper-input float-label="Value Name" type="text" value="{{newValueNameInput}}" placeholder="[[computeGetValueName(selectedValue)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_value" service-data="[[computeValueNameServiceData(newValueNameInput)]]">Rename Value</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-values",properties:{hass:{type:Object},nodes:{type:Array},values:{type:Array},selectedNode:{type:Number},selectedValue:{type:Number,value:-1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshValues(t.selectedNode)},5e3)}},computeSelectCaption:function(e){return e.value.label+" (Instance: "+e.value.instance+", Index: "+e.value.index+")"},computeGetValueName:function(e){return this.values[e].value.label},computeIsValueSelected:function(e){return!this.nodes||-1===this.selectedNode||-1===e},refreshValues:function(e){var t=[];this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),this.values=t,this.selectedValueChanged(this.selectedValue)}.bind(this))},computeValueNameServiceData:function(e){return-1===!this.selectedNode||-1===this.selectedValue?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,value_id:this.values[this.selectedValue].key,name:e}}});</script><dom-module id="zwave-groups" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node group associations"><div class="device-picker"><paper-dropdown-menu label="Node to control" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedTargetNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsTargetNodeSelected(selectedTargetNode)]]"><div class="device-picker"><paper-dropdown-menu label="Group" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedGroup}}"><template is="dom-repeat" items="[[groups]]" as="state"><paper-item>[[computeSelectCaptionGroup(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><template is="dom-if" if="[[!computeIsGroupSelected(selectedGroup)]]"><div class="help-text"><span>Other Nodes in this group:</span><template is="dom-repeat" items="[[otherGroupNodes]]" as="state"><span>[[state]]</span></template></div><div class="help-text"><span>Max Associations:</span> <span>[[maxAssociations]]</span></div><div class="card-actions"><template is="dom-if" if="[[!noAssociationsLeft]]"><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;add&quot;)]]">Add To Group</ha-call-service-button></template><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;remove&quot;)]]">Remove From Group</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-groups",properties:{hass:{type:Object},nodes:{type:Array},groups:{type:Array},selectedNode:{type:Number},selectedTargetNode:{type:Number,value:-1},selectedGroup:{type:Number,value:-1,observer:"selectedGroupChanged"},otherGroupNodes:{type:Array,value:-1,computed:"computeOtherGroupNodes(selectedGroup)"},maxAssociations:{type:String,value:"",computed:"computeMaxAssociations(selectedGroup)"},noAssociationsLeft:{type:Boolean,value:!0,computed:"computeAssociationsLeft(selectedGroup)"}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshGroups(t.selectedNode)},5e3)}},computeAssociationsLeft:function(e){return-1===e||this.maxAssociations===this.otherGroupNodes.length},computeMaxAssociations:function(e){if(-1===e)return-1;var t=this.groups[e].value.max_associations;return t||["None"]},computeOtherGroupNodes:function(e){if(-1===e)return-1;var t=Object.values(this.groups[e].value.associations);return t.length?t:["None"]},computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"},computeSelectCaptionGroup:function(e){return e.key+": "+e.value.label},computeIsTargetNodeSelected:function(e){return!this.nodes||-1===e},computeIsGroupSelected:function(e){return!this.nodes||-1===this.selectedNode||-1===e},computeAssocServiceData:function(e,t){return-1===!this.groups||-1===e||-1===this.selectedNode?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,association:t,target_node_id:this.nodes[this.selectedTargetNode].attributes.node_id,group:this.groups[e].key}},refreshGroups:function(e){var t=[];this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),this.groups=t,this.selectedGroupChanged(this.selectedGroup)}.bind(this))},selectedGroupChanged:function(e){-1!==this.selectedGroup&&-1!==e&&(this.maxAssociations=this.groups[e].value.max_associations,this.otherGroupNodes=Object.values(this.groups[e].value.associations))}});</script><dom-module id="zwave-node-config" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node config options"><template is="dom-if" if="[[wakeupNode]]"><div class="card-actions"><paper-input float-label="Wakeup Interval" type="number" value="{{wakeupInput}}" placeholder="[[computeGetWakeupValue(selectedNode)]]"><div suffix="">seconds</div></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_wakeup" service-data="[[computeWakeupServiceData(wakeupInput)]]">Set Wakeup</ha-call-service-button></div></template><div class="device-picker"><paper-dropdown-menu label="Config parameter" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedConfigParameter}}"><template is="dom-repeat" items="[[config]]" as="state"><paper-item>[[computeSelectCaptionConfigParameter(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'List')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Byte Short Int')]]"><div class="card-actions"><paper-input label="{{selectedConfigParameterNumValues}}" type="number" value="{{selectedConfigValue}}" max="{{configParameterMax}}" min="{{configParameterMin}}"></paper-input></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><div class="help-text"><span>[[configValueHelpText]]</span></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button Byte Short Int List')]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_config_parameter" service-data="[[computeSetConfigParameterServiceData(selectedConfigValue)]]">Set Config Parameter</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-node-config",properties:{hass:{type:Object},nodes:{type:Array,observer:"nodesChanged"},selectedNode:{type:Number,value:-1,observer:"nodesChanged"},config:{type:Array,value:function(){return[]}},selectedConfigParameter:{type:Number,value:-1,observer:"selectedConfigParameterChanged"},configParameterMax:{type:Number,value:-1},configParameterMin:{type:Number,value:-1},configValueHelpText:{type:String,value:"",computed:"computeConfigValueHelp(selectedConfigParameter)"},selectedConfigParameterType:{type:String,value:""},selectedConfigValue:{type:Number,value:-1,observer:"computeSetConfigParameterServiceData"},selectedConfigParameterValues:{type:Array,value:function(){return[]}},selectedConfigParameterNumValues:{type:String,value:""},loadedConfigValue:{type:Number,value:-1},wakeupInput:{type:Number},wakeupNode:{type:Boolean,value:!1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshConfig(t.selectedNode)},5e3)}},nodesChanged:function(){this.nodes&&(this.wakeupNode=0===this.nodes[this.selectedNode].attributes.wake_up_interval||this.nodes[this.selectedNode].attributes.wake_up_interval,this.wakeupNode&&(0===this.nodes[this.selectedNode].attributes.wake_up_interval?this.wakeupInput="":this.wakeupInput=this.nodes[this.selectedNode].attributes.wake_up_interval))},computeGetWakeupValue:function(e){return-1!==this.selectedNode&&this.nodes[e].attributes.wake_up_interval?this.nodes[e].attributes.wake_up_interval:"unknown"},computeWakeupServiceData:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,value:e}},computeConfigValueHelp:function(e){if(-1===e)return"";var t=this.config[e].value.help;return t||["No helptext available"]},computeSetConfigParameterServiceData:function(e){if(-1===this.selectedNode||-1===this.selectedConfigParameter)return-1;var t=null;return"Short Byte Int".includes(this.selectedConfigParameterType)&&(t=parseInt(e,10)),"Bool Button".includes(this.selectedConfigParameterType)&&(t=this.selectedConfigParameterValues[e]),"List"===this.selectedConfigParameterType&&(t=this.selectedConfigParameterValues[e]),{node_id:this.nodes[this.selectedNode].attributes.node_id,parameter:this.config[this.selectedConfigParameter].key,value:t}},selectedConfigParameterChanged:function(e){-1!==e&&(this.selectedConfigValue=-1,this.loadedConfigValue=-1,this.selectedConfigParameterValues=[],this.selectedConfigParameterType=this.config[e].value.type,this.configParameterMax=this.config[e].value.max,this.configParameterMin=this.config[e].value.min,this.loadedConfigValue=this.config[e].value.data,this.configValueHelpText=this.config[e].value.help,"Short Byte Int".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterNumValues=this.config[e].value.data_items,this.selectedConfigValue=this.loadedConfigValue),"Bool Button".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=["True","False"],this.config[e].value.data?this.loadedConfigValue="True":this.loadedConfigValue="False"),"List".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=this.config[e].value.data_items))},isConfigParameterSelected:function(e,t){return-1!==e&&(this.config[e].value.type===t||!!t.includes(this.config[e].value.type))},computeSelectCaptionConfigParameter:function(e){return e.key+": "+e.value.label},refreshConfig:function(e){var t=[];this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(a){t.push({key:a,value:e[a]})}),this.config=t,this.selectedConfigParameterChanged(this.selectedConfigParameter)}.bind(this))}});</script><dom-module id="zwave-usercodes" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}</style><div class="content"><paper-card heading="Node user codes"><div class="device-picker"><paper-dropdown-menu label="Code slot" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedUserCode}}"><template is="dom-repeat" items="[[userCodes]]" as="state"><paper-item>[[computeSelectCaptionUserCodes(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isUserCodeSelected(selectedUserCode)]]"><div class="card-actions"><paper-input label="User code" type="number" value="{{selectedUserCodeValue}}" maxlength="{{userCodeMaxLen}}" min="0"></paper-input></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="lock" service="set_usercode" service-data="[[computeUserCodeServiceData(selectedUserCodeValue, &quot;Add&quot;)]]">Set Usercode</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="lock" service="clear_usercode" service-data="[[computeUserCodeServiceData(selectedUserCode, &quot;Delete&quot;)]]">Delete Usercode</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-usercodes",properties:{hass:{type:Object},nodes:{type:Array},selectedNode:{type:Number},userCodes:{type:Object},userCodeMaxLen:{type:Number,value:4},selectedUserCode:{type:Number,value:-1,observer:"selectedUserCodeChanged"},selectedUserCodeValue:{type:Number,value:-1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var s=this;setTimeout(function(){s.refreshUserCodes(s.selectedNode)},5e3)}},isUserCodeSelected:function(e){return-1!==e},computeSelectCaptionUserCodes:function(e){return e.key+": "+e.value.label},selectedUserCodeChanged:function(e){if(-1!==this.selectedUserCode&&-1!==e){var s=parseInt(this.userCodes[e].value.code.trim());this.userCodeMaxLen=this.userCodes[e].value.length,isNaN(s)?this.selectedUserCodeValue="":this.selectedUserCodeValue=s}},computeUserCodeServiceData:function(e,s){if(-1===this.selectedNode||!e)return-1;var t=null,d=null;return"Add"===s&&(d=e,t={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode,usercode:d}),"Delete"===s&&(t={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode}),t},refreshUserCodes:function(e){this.selectedUserCodeValue="";var s=[];this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(t){s.push({key:t,value:e[t]})}),this.userCodes=s,this.selectedUserCodeChanged(this.selectedUserCode)}.bind(this))}});</script><dom-module id="ha-entity-config"><template><style include="iron-flex ha-style">paper-card{display:block;}.device-picker{@apply (--layout-horizontal);padding-bottom:24px;}.form-placeholder{@apply (--layout-vertical);@apply (--layout-center-center);height:96px;}[hidden]:{display:none;};.card-actions{@apply (--layout-horizontal);@apply (--layout-justified);}dom-if{display:none;}</style><paper-card><div class="card-content"><div class="device-picker"><paper-dropdown-menu label="[[label]]" class="flex" disabled="[[!entities.length]]"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><div class="form-container"><template is="dom-if" if="[[computeShowPlaceholder(formState)]]"><div class="form-placeholder"><template is="dom-if" if="[[computeShowNoDevices(formState)]]">No entities found! :-(</template><template is="dom-if" if="[[computeShowSpinner(formState)]]"><paper-spinner active="" alt="[[formState]]"></paper-spinner>[[formState]]</template></div></template><div hidden$="[[!computeShowForm(formState)]]" id="form"></div></div></div><div class="card-actions"><paper-button on-tap="saveEntity" disabled="[[computeShowPlaceholder(formState)]]">SAVE</paper-button><template is="dom-if" if="[[allowDelete]]"><paper-button class="warning" on-tap="deleteEntity" disabled="[[computeShowPlaceholder(formState)]]">DELETE</paper-button></template></div></paper-card></template></dom-module><script>Polymer({is:"ha-entity-config",properties:{hass:{type:Object,observer:"hassChanged"},label:{type:String,value:"Device"},entities:{type:Array,observer:"entitiesChanged"},allowDelete:{type:Boolean,value:!1},selectedEntity:{type:Number,value:-1,observer:"entityChanged"},formState:{type:String,value:"no-devices"},config:{type:Object}},attached:function(){this.formEl=document.createElement(this.config.component),this.formEl.hass=this.hass,this.$.form.appendChild(this.formEl),this.entityChanged(this.selectedEntity)},computeSelectCaption:function(t){return this.config.computeSelectCaption?this.config.computeSelectCaption(t):window.hassUtil.computeStateName(t)},computeShowNoDevices:function(t){return"no-devices"===t},computeShowSpinner:function(t){return"loading"===t||"saving"===t},computeShowPlaceholder:function(t){return"editing"!==t},computeShowForm:function(t){return"editing"===t},hassChanged:function(t){this.formEl&&(this.formEl.hass=t)},entitiesChanged:function(t,e){if(0!==t.length)if(e){var i=e[this.selectedEntity].entity_id,n=t.findIndex(function(t){return t.entity_id===i});-1===n?this.selectedEntity=0:n!==this.selectedEntity&&(this.selectedEntity=n)}else this.selectedEntity=0;else this.formState="no-devices"},entityChanged:function(t){if(this.entities&&this.formEl){var e=this.entities[t];if(e){this.formState="loading";var i=this;this.formEl.loadEntity(e).then(function(){i.formState="editing"})}}},saveEntity:function(){this.formState="saving";var t=this;this.formEl.saveEntity().then(function(){t.formState="editing"})}});</script><dom-module id="ha-form-style"><template><style>.form-group{@apply (--layout-horizontal);@apply (--layout-center);padding:8px 16px;}.form-group label{@apply (--layout-flex-2);}.form-group .form-control{@apply (--layout-flex-1);}.form-group.vertical{@apply (--layout-vertical);@apply (--layout-start);}paper-dropdown-menu.form-control{margin:-9px 0;}</style></template></dom-module><dom-module id="ha-form-zwave-device" assetpath="zwave/"><template><style include="iron-flex ha-style ha-form-style"></style><div class="form-group"><paper-checkbox checked="{{entityIgnored}}" class="form-control">Exclude from Home Assistant</paper-checkbox></div><div class="form-group"><paper-dropdown-menu class="form-control flex" label="Polling intensity" disabled="[[entityIgnored]]"><paper-listbox slot="dropdown-content" selected="{{entityPollingIntensity}}"><paper-item>Do not poll (0)</paper-item><paper-item>Poll every time (1)</paper-item><paper-item>Poll every other time (2)</paper-item></paper-listbox></paper-dropdown-menu></div></template></dom-module><script>Polymer({is:"ha-form-zwave-device",properties:{hass:{type:Object},entity:{type:Object},entityIgnored:{type:Boolean},entityPollingIntensity:{type:Number}},loadEntity:function(t){this.entity=t;var i=this;return this.hass.callApi("GET","config/zwave/device_config/"+t.entity_id).then(function(t){i.entityIgnored=t.ignored||!1,i.entityPollingIntensity=t.polling_intensity||0})},saveEntity:function(){var t={ignored:this.entityIgnored,polling_intensity:this.entityPollingIntensity};return this.hass.callApi("POST","config/zwave/device_config/"+this.entity.entity_id,t)}});</script><dom-module id="zwave-node-options" assetpath="zwave/"><template><ha-config-section is-wide="[[isWide]]"><span slot="header">Z-Wave</span> <span slot="introduction">Z-Wave devices contain a lot of options. These controls will allow you to get into the nitty gritty details.</span><ha-entity-config hass="[[hass]]" entities="[[entities]]" config="[[entityConfig]]"></ha-entity-config></ha-config-section></template></dom-module><script>Polymer({is:"zwave-node-options",properties:{hass:{type:Object},isWide:{type:Boolean,value:!1},entities:{type:Array,computed:"computeEntities(hass)"},entityConfig:{type:Object,value:{component:"ha-form-zwave-device",computeSelectCaption:function(t){return window.hassUtil.computeStateName(t)+" ("+window.hassUtil.computeDomain(t)+")"}}}},computeEntities:function(t){return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(t){return!t.attributes.hidden&&"node_id"in t.attributes}).sort(window.hassUtil.sortByName)}});</script><dom-module id="ha-config-zwave" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}.node-info{margin-left:16px;}.help-text{padding-left:24px;padding-right:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}ha-service-description{display:block;color:grey;}[hidden]{display:none;}.toggle-help-icon{position:absolute;top:6px;right:0;color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Z-Wave Manager</div></app-toolbar></app-header><zwave-node-options is-wide="[[isWide]]" hass="[[hass]]"></zwave-node-options><div class="content"><zwave-network id="zwave-network" hass="[[hass]]"></zwave-network></div><div class="content"><paper-card heading="Z-Wave Node Management"><paper-icon-button class="toggle-help-icon" on-tap="toggleHelp" icon="mdi:help-circle"></paper-icon-button><div class="device-picker"><paper-dropdown-menu label="Nodes" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsNodeSelected(selectedNode)]]"><template is="dom-if" if="[[showHelp]]"><div style="color: grey; padding: 12px">Select node to view per-node options</div></template></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_node" service-data="[[computeNodeServiceData(selectedNode)]]">Refresh Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Remove Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="replace_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Replace Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="replace_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="print_node" service-data="[[computeNodeServiceData(selectedNode)]]">Print Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="print_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="card-actions"><paper-input float-label="New node name" type="text" value="{{newNodeNameInput}}" placeholder="[[computeGetNodeName(selectedNode)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_node" service-data="[[computeNodeNameServiceData(newNodeNameInput)]]">Rename Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="rename_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="device-picker"><paper-dropdown-menu label="Entities of this node" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaptionEnt(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsEntitySelected(selectedEntity)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_entity" service-data="[[computeRefreshEntityServiceData(selectedEntity)]]">Refresh Entity</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_entity" hidden$="[[!showHelp]]"></ha-service-description></div><div class="content"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{entityInfoActive}}">Entity Attributes</paper-button></div><template is="dom-if" if="{{entityInfoActive}}"><template is="dom-repeat" items="[[selectedEntityAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></div></template></template></paper-card></div><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-node-information id="zwave-node-information" nodes="[[nodes]]" selected-node="[[selectedNode]]"></zwave-node-information></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-values hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" values="[[values]]"></zwave-values></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-groups hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" groups="[[groups]]"></zwave-groups></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-node-config hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" config="[[config]]"></zwave-node-config></template><template is="dom-if" if="{{hasNodeUserCodes}}"><zwave-usercodes id="zwave-usercodes" hass="[[hass]]" nodes="[[nodes]]" user-codes="[[userCodes]]" selected-node="[[selectedNode]]"></zwave-usercodes></template><div class="content"><ozw-log id="ozw-log" hass="[[hass]]"></ozw-log></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-config-zwave",properties:{hass:Object,isWide:Boolean,nodes:{type:Array,computed:"computeNodes(hass)"},selectedNode:{type:Number,value:-1,observer:"selectedNodeChanged"},config:{type:Array,value:function(){return[]}},entities:{type:Array,computed:"computeEntities(selectedNode)"},entityInfoActive:{type:Boolean},selectedEntity:{type:Number,value:-1,observers:["computeIsEntitySelected","computeRefreshEntityServiceData"]},selectedEntityAttrs:{type:Array,computed:"computeSelectedEntityAttrs(selectedEntity)"},values:{type:Array},groups:{type:Array},newNodeNameInput:{type:String},userCodes:{type:Array,value:function(){return[]}},hasNodeUserCodes:{type:Boolean,value:!1},showHelp:{type:Boolean,value:!1}},computeNodes:function(e){return Object.keys(e.states).map(function(t){return e.states[t]}).filter(function(e){return!e.attributes.hidden&&e.entity_id.match("zwave[.]")}).sort(window.hassUtil.sortByName)},computeEntities:function(e){if(!this.nodes||-1===e)return-1;var t=this.hass,s=this.nodes[this.selectedNode].attributes.node_id;return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(e){return void 0!==e.attributes.node_id&&(!e.attributes.hidden&&"node_id"in e.attributes&&e.attributes.node_id===s&&!e.entity_id.match("zwave[.]"))}).sort(window.hassUtil.sortByName)},selectedNodeChanged:function(e){this.newNodeNameInput="",-1!==e&&(this.selectedConfigParameter=-1,this.selectedConfigParameterValue=-1,this.selectedGroup=-1,this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){this.config=this._objToArray(e)}.bind(this)),this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){this.values=this._objToArray(e)}.bind(this)),this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){this.groups=this._objToArray(e)}.bind(this)),this.hasNodeUserCodes=!1,this.notifyPath("hasNodeUserCodes"),this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){this.userCodes=this._objToArray(e),this.hasNodeUserCodes=this.userCodes.length>0,this.notifyPath("hasNodeUserCodes")}.bind(this)))},computeSelectedEntityAttrs:function(e){if(-1===e)return"No entity selected";var t=this.entities[e].attributes,s=[];return Object.keys(t).forEach(function(e){s.push(e+": "+t[e])}),s.sort()},computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"},computeSelectCaptionEnt:function(e){return window.hassUtil.computeDomain(e)+"."+window.hassUtil.computeStateName(e)},computeIsNodeSelected:function(){return this.nodes&&-1!==this.selectedNode},computeIsEntitySelected:function(e){return-1===e},computeNodeServiceData:function(e){return{node_id:this.nodes[e].attributes.node_id}},computeGetNodeName:function(e){return-1!==this.selectedNode&&this.nodes[e].entity_id?this.nodes[e].attributes.node_name:-1},computeNodeNameServiceData:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,name:e}},computeRefreshEntityServiceData:function(e){return-1===e?-1:{entity_id:this.entities[e].entity_id}},toggleHelp:function(){this.showHelp=!this.showHelp},_objToArray:function(e){var t=[];return Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),t},_backTapped:function(){history.back()}});</script></div><dom-module id="ha-panel-config"><template><style>iron-pages{height:100%;}</style><app-route route="[[route]]" pattern="/:page" data="{{_routeData}}" tail="{{_routeTail}}"></app-route><iron-media-query query="(min-width: 1040px)" query-matches="{{wide}}"></iron-media-query><iron-media-query query="(min-width: 1296px)" query-matches="{{wideSidebar}}"></iron-media-query><iron-pages selected="[[_routeData.page]]" attr-for-selected="page-name" fallback-selection="not-found" selected-attribute="visible"><ha-config-dashboard page-name="dashboard" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-dashboard><ha-config-automation page-name="automation" route="[[_routeTail]]" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-automation><ha-config-script page-name="script" route="[[_routeTail]]" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-script><ha-config-zwave page-name="zwave" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-zwave><ha-config-core page-name="core" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-core><hass-error-screen page-name="not-found" error="Page not found." title="Configuration"></hass-error-screen></iron-pages></template></dom-module><script>Polymer({is:"ha-panel-config",properties:{hass:Object,narrow:Boolean,showMenu:Boolean,route:{type:Object,observer:"_routeChanged"},_routeData:Object,_routeTail:Object,wide:Boolean,wideSidebar:Boolean,isWide:{type:Boolean,computed:"computeIsWide(showMenu, wideSidebar, wide)"}},computeIsWide:function(e,o,t){return e?o:t},_routeChanged:function(e){""===e.path&&"/config"===e.prefix&&(history.replaceState(null,null,"/config/dashboard"),this.fire("location-changed"))}});</script></body></html>